@{
    ViewBag.Title = "Form";
    Layout = "~/Views/Shared/_Form.cshtml";
}
<script>
    var keyValue = $.request("keyValue");
    //var allmoveclass = $.request("allmoveclass");
    var moveclass = $.request("F_ClassId");
    var F_Grade = $.request("F_Grade");
    var F_Semester = $.request("F_Semester");
    var F_Divis = $.request("F_Divis");
    var F_Year = $.request("F_Year");

    $(function () {
        initControl();
        if (!!keyValue) {
            $('#F_MoveClassId').val(moveclass).trigger("change");
            //$.ajax({
            //    url: "/ScheduleManage/Schedule_ClassStudent/GetFormJson",
            //    data: { keyValue: keyValue },
            //    dataType: "json",
            //    async: false,
            //    success: function (data) {
            //        console.log(data);
            //        $("#form1").formSerialize(data);
            //        //$("#form1").find('.form-control,select,input').attr('readonly', 'readonly');
            //        $('#F_StudentId').prop("disabled", true);
            //        $('#F_TaskId').prop("disabled", true);
            //    }
            //});
        }
    });
    function initControl() {
        changeClass();
        $.addRequired('#form1');
   }

   function changeClass() {
       $("#F_MoveClassId").find("option").remove();
       $("#F_MoveClassId").bindSelect({
           url: "/ScheduleManage/Schedule_MoveClass/GetGradeSelectJson?F_Year=" + F_Year + "&F_Semester=" + F_Semester + "&F_Divis=" + F_Divis + "&F_Grade=" + F_Grade,
       });
   }

   function changeTask() {
       $("#F_TaskId").find("option").remove();
       $("#F_TaskId").bindSelect({
           url: "/ScheduleManage/Schedule_WishCourseTask/GetSelectJson?F_Type=1",
           id: "F_Id",
           text: "F_TaskName"
       });
   }

   function changeStudent() {
       $("#F_StudentId").bindSelect({
           url: "/ScheduleManage/Schedule_ClassStudent/GetStudentGridJson?F_TaskId=" + $("#F_TaskId").val(),
           id: "F_Id",
           text: "F_Name"
       });
   }
    function submitForm() {
        if (!$('#form1').formValid()) {
            return false;
        }
        $.submitForm({
            url: "/ScheduleManage/Schedule_MoveClassStudent/SubmitForm?keyValue=" + keyValue,
            param: $("#form1").formSerialize(),
            success: function () {
                $.currentWindow().$("#gridList").trigger("reloadGrid");
            }
        })

    }
</script>
<form id="form1">
    <div style="margin-top: 10px; margin-left: 10px; margin-right: 10px;">
        <ul class="nav nav-tabs">
            <li class="active"><a href="#">基本信息</a></li>
        </ul>
        <div style="padding-top: 20px; margin-right: 30px;">
            <table class="form">

                <tr>
                    <th class="formTitle">班级：</th>
                    <td class="formValue">
                        <select id="F_MoveClassId" name="F_MoveClassId" class="form-control">
                            <option value="">选择班级</option>
                        </select>
                    </td>
                </tr>
            </table>
        </div>
    </div>
</form>