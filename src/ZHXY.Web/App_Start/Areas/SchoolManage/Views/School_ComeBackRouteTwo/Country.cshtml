@{
    ViewBag.Title = "Country";
    Layout = "~/Views/Shared/_Form.cshtml";
}
<script>
    var keyValue = $.request("KeyValue");
    $(function () {
        initControl();
        //if (!!keyValue) {
        //    $.ajax({
        //        url: "/SchoolManage/School_ComeBackRouteTwo/GetFormJson",
        //        data: { keyValue: keyValue },
        //        dataType: "json",
        //        async: false,
        //        success: function (data) {
        //            $("#form1").formSerialize(data)
        //            //$("input[name='F_Country']").attr("checked", "checked");
        //            //$("[value=110000]").attr("checked", "checked");

        //            $("input[name='F_Country']").each(function () {
        //                //debugger
        //                var F_Country = data.F_Country.split(',');
        //                for (var i = 0; i < F_Country.length; i++) {
        //                    if ($(this).val() == F_Country[i]) {
        //                        $(this).attr("checked", "checked");
        //                    }
        //                }

        //                //else { $(this).parent("li").show(); }
        //            });
        //        }
        //    });
        //}
        //alert(keyValue);
        $("input[name='F_Country']").each(function () {
            //debugger
            var F_Country = keyValue.split(',');
            for (var i = 0; i < F_Country.length; i++) {
                if ($(this).val() == F_Country[i]) {
                    $(this).attr("checked", "checked");
                }
            }

            //else { $(this).parent("li").show(); }
        });
    });
    function initControl() {
        //$("#F_Country").bindCheckBox({
        //    url: "/SchoolManage/School_ComeBackRouteTwo/GetCheckBoxJson?tname=School_ComeBackRouteTwo&keyword=" + keyValue,
        //    id: "value",
        //    text: "text",
        //    name: "F_Country"
        //});
        $.ajax({
            url: "/SchoolManage/School_Area/GetTreeChildJson",
            data: { keyValue: keyValue },
            dataType: "json",
            async: false,
            success: function (data) {
                var html = "";
                for (var i = 0; i < data.length; i++) {
                    html += "<tr><td colspan='3' class='formValue' style='color:red;font-size:20px;'>" + data[i].label + "</td></tr><tr><td colspan='3' class='formValue'>";
                    //debugger;
                    for (var j = 0; j < data[i].children.length; j++) {
                        html += "<div class='ckbox'><input multiselect='true' type='checkbox' value=" + data[i].children[j].value + " name='F_Country' id=" + data[i].children[j].value + " ><label for=" + data[i].children[j].value + ">" + data[i].children[j].label + "</label></div>";
                    }
                    html += "</td><tr></tr></tr>";
                }
                $("#table").html(html);
                //console.log(html);
            }
        });
        $.addRequired('#form1')
    }
    function submitForm() {
        obj = document.getElementsByName("F_Country");
        check_val = [];
        for (k in obj) {
            if (obj[k].checked)
                check_val.push(obj[k].value);
        }
        //alert($('input:[name="F_Country"]').val());
        $.modalClose();
        return check_val

    }
</script>
<form id="form1">
    <div style="margin-top: 10px; margin-left: 10px; margin-right: 10px;">
        <ul class="nav nav-tabs">
            <li class="active"><a href="#">基本信息</a></li>
        </ul>
        <div style="padding-top: 20px; margin-right: 30px;">
            <table class="form" id="table" style="margin-left:20px;">
                @*<tr>
                        <th class="formTitle">绍兴地区</th>
                        <td colspan="3" class="formValue" id="F_Country"></td>
                    </tr>*@
            </table>
        </div>
    </div>
</form>