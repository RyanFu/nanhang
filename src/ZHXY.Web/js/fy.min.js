(function(t,e,i){var n=t.document,s=t.location;var a=function(t){var n=function(t){return new n.fn.init(t)};n.fn=n.prototype={init:function(i){this.jq=i instanceof t?i:e(i);if(this.jq.length<1)throw new Error("fy component container is null.")}};n.fn.__defined={};var s=function(t,e){if(t.parent){if(!(t.parent instanceof Array))t.parent=[t.parent];t.parent.push(e)}else t.parent=e;var i=e.prototype,n=t.prototype,s;for(s in i){if(!(s in n))n[s]=i[s]}};n.register=function(t,e,a){if(t in n.fn.init.prototype)throw new Error("["+t+"] registered failed: The same name is used by another component!");e.prototype.define=t;e.prototype.getDefine=function(){return e};e.prototype.extra=function(t,e){var n;for(n in t)if(this[n]===i||e)this[n]=t[n];return this};n.fn.__defined[t]=e;if(a){for(var o=2,r=arguments.length;o<r;o++){if(!n.fn.__defined[arguments[o]])throw new Error("Super Class ["+arguments[o]+"] Not Found!");s(e,n.fn.__defined[arguments[o]])}}n.fn.init.prototype[t]=function(t,i,n){return new e(this.jq,t,i,n)}};return n}(e);t.fy=a})(window,jQuery);(function(window,$,fy,undefined){fy.EMPTY_FN=$.noop;fy.PREVENT_FN=function(){return false};var srvFn=function(t){if(t.indexOf("http://")===0||t.indexOf("https://")===0)this.url=t;else this.url=fy.serverRootPath+t.replace(/^['/']/,"");this.unlimited=false;this.accessable=true};function makeParam(t,e,i){var n=this;var s=function(i){if(i.error)srvFn.prototype.handleError.call(n,i.error);else typeof t==="function"?t(i):e&&typeof e==="function"?e(i):void 0;n.accessable=true;n=null},a=typeof t!="function"?t:null,o=typeof i==="string"?i:typeof e==="string"?e:undefined;this.url=this.url.replace(/[\r\n]/g,"");if(a){for(var r in a){var l=a[r];if(typeof l==="string"){a[r]=l.replace(/</g,"t_start_t").replace(/>/g,"t_end_t").replace(/[\r\n]/g,"")}}}return[this.url,a,s,o]}srvFn.prototype={handleError:function(t){if(typeof this.onError==="function")this.onError(t);else if(typeof fy.onAjaxError==="function"){if(fy.server.isLocal){var e=this.url.split("actionCode=");if(e.length>1)e=e[1].split("&")[0];else e=false;if(e){if(sys.showErrCode)t="[code]: <b>"+e+"</b>, <br>"+t}}fy.onAjaxError.call(this,t)}},toString:function(){return this.url},getJSON:function(t,e){if(this.accessable||this.unlimited){this.accessable=false;return $.getJSON.apply(this,makeParam.call(this,t,e,"json"))}},get:function(t,e,i){if(this.accessable||this.unlimited){this.accessable=false;return $.get.apply(this,makeParam.call(this,t,e,i))}},post:function(t,e,i){if(this.accessable||this.unlimited){this.accessable=false;return $.post.apply(this,makeParam.call(this,t,e,i))}},postParam:function(t,e,i){return this.postValue({actionParam:t},e,i)},postVO:function(t,e,i){return this.postValue({vo:t},e,i)},postValue:function(t,e,i){var n={};for(var s in t){n[s]=JSON.stringify(t[s])}return this.post(n,e,i)}};fy.server=function(t,e){if(t)fy.server.add(t,e);return fy.server};fy.server.add=function(t,e){var i=fy.server,n=!e;if(typeof t==="string"){if(typeof e==="string"){var s=t;t={};t[s]=e;n=true}else{var a=t.split(","),o=a.length;t={};while(o--){var r=a[o];t[r]=r+".foyo?actionCode="+r+"&actionParam=1&multiParam=1"}}}for(var l in t){if(l in i&&n){}else i[l]=new srvFn(t[l])}return i};fy.server.isLocal=location.hostname.indexOf("127.0.0.1")>-1||location.hostname.indexOf("localhost")>-1;fy.server.isLAN=location.hostname.split(".")[0]in{192:1,172:1,10:1}||fy.server.isLocal;fy.serverRootPath="/";fy.onAjaxError=function(t){fy.alert(t.toString())};fy.urlJoin=function(t,e){for(var i=1,n=arguments.length;i<n;i++){var s=arguments[i];if(s!==undefined&&s!==null){if(s.indexOf("?")===0||s.indexOf("&")===0)s=s.substr(1);var a=i>1?"&":t.indexOf("?")>-1?"&":"?";t+=a+s}}return t};window.log=function(debug){if(debug){if(!!window.console){function mkArg(t){var e=[];while(t--)e[t]=t;return"arguments["+e.join("],arguments[")+"]"}window.log=function(){console.log.apply(console,arguments)};window.log.error=function(){eval("console.error("+mkArg(arguments.length)+")")};window.log.warn=function(){eval("console.warn("+mkArg(arguments.length)+")")}}else{document.write('<div id="fylogTracer001"></div>');var e=document.getElementById("fylogTracer001");window.log=function(){if(e.scrollHeight>600)e.innerHTML="";else e.innerHTML+="<p>";for(var t=0,i=arguments.length;t<i;t++){e.innerHTML+=(JSON.stringify(arguments[t])||arguments[t])+" "}}}}else{window.log=function(){};window.log.warn=window.log.error=fy.EMPTY_FN}};fy.formatString=function(t,e){if(arguments.length==1)return function(){var e=$.makeArray(arguments);e.unshift(t);return $.validator.format.apply(this,e)};if(arguments.length>2&&e.constructor!=Array){e=$.makeArray(arguments).slice(1)}if(e.constructor!=Array){e=[e]}$.each(e,function(e,i){t=t.replace(new RegExp("\\{"+e+"\\}","g"),i)});return t};fy.formatJSON=function(){var t=/\{(\w*[:]*[=]*\w+)\}(?!})/g;return function(e,i){return e.replace(t,function(t,e,n){return i[e]})}}();fy.cookie=function(t,e,i){if(typeof e!="undefined"){i=i||{};if(e===null){e="";i.expires=-1}if(typeof e==="object"&&JSON.stringify){e=JSON.stringify(e)}var n="";if(i.expires&&(typeof i.expires=="number"||i.expires.toUTCString)){var s;if(typeof i.expires=="number"){s=new Date;s.setTime(s.getTime()+i.expires*24*60*60*1e3)}else{s=i.expires}n="; expires="+s.toUTCString()}var a=i.path?"; path="+i.path:"";var o=i.domain?"; domain="+i.domain:"";var r=i.secure?"; secure":"";document.cookie=[t,"=",encodeURIComponent(e),n,a,o,r].join("")}else{var l=null;if(document.cookie&&document.cookie!=""){var d=document.cookie.split(";");for(var h=0;h<d.length;h++){var c=jQuery.trim(d[h]);if(c.substring(0,t.length+1)==t+"="){try{l=decodeURIComponent(c.substring(t.length+1))}catch(e){l=c.substring(t.length+1)}break}}}if(jQuery.evalJSON&&l&&l.match(/^\s*\{/)){try{l=jQuery.evalJSON(l)}catch(t){}}return l}};fy.request=function(){var t={},e=window.location,i=e.search.replace(/^\?/,"").split("&"),n=i.length,s=0,a;for(;s<n;s++){if(!i[s]){continue}a=i[s].split("=");try{t[a[0]]=decodeURI(a[1])}catch(e){t[a[0]]=a[1]}}return t}();fy.padLeft=function(t,e,i){var n=t.toString(),s=n.length,a=i||"0";if(e>s)n=new Array(e-s+1).join(a.toString())+n;return n};fy.addSeconds=function(t,e){return new Date(t.getTime()+e*1e3)};fy.addDays=function(t,e){return new Date(t.getTime()+e*24*3600*1e3)};fy.daySpan=function(t,e){return Math.round((t.valueOf()-e.valueOf())/864e5)};fy.weekSpan=function(t,e){var i=fy.daySpan(t,e);return Math.ceil((i+e.getDay())/7)};fy.monthSpan=function(t,e){if(t>e)t=e;var i=t.getFullYear(),n=e.getFullYear(),s=+(t.getMonth()+1),a=(n-+i)*12+(e.getMonth()+1),o=0;do{do{o++;if(s==12){s=1;a-=12;break}}while(a>s++)}while(n>i++);return o};fy.GetMonthByRange=function(t,e){if(typeof t==="string")t=fy.parseDate(t);if(typeof e==="string")e=fy.parseDate(e);if(t>e)t=e;var i=new Date,n=i.getFullYear(),s=i.getMonth()+1,a=n+""+fy.padLeft(s,2);var o=t.getFullYear(),r=e.getFullYear(),l=+(t.getMonth()+1),d=(r-+o)*12+(e.getMonth()+1),h=[];do{do{var c=new Date(o,l-1,1);var u=fy.GetCurrentMonthRange(c);if(fy.parseDate(u.startDate)<t)u.startDate=fy.formatDate(t);if(fy.parseDate(u.endDate)>e)u.endDate=fy.formatDate(e);var f=o+""+fy.padLeft(l,2),p=o+"年"+fy.padLeft(l,2)+"月",y={en_v:f,cn_v:p,startDate:u.startDate,endDate:u.endDate,isCurrMonth:f==a};h.push(y);if(l==12){l=1;d-=12;break}}while(d>l++)}while(r>o++);return h};fy.GetCurrentYearRange=function(t){var e=t.getFullYear();var i=new Date(e,0,1);var n=new Date(e,11,31);return{startDate:fy.formatDate(i),endDate:fy.formatDate(n)}};fy.GetCurrentSeasonRange=function(t){var e=t.getMonth();var i=t.getFullYear();var n=fy.getQuarterSeasonStartMonth(e);var s=n+2;var a=new Date(i,n,1);var o=new Date(i,s,fy.getMonthDays(i,s));return{startDate:fy.formatDate(a),endDate:fy.formatDate(o)}};fy.GetCurrentMonthRange=function(t){var e=t.getMonth();var i=t.getFullYear();var n=new Date(i,e,1);if(e==11){i++;e=0}else{e++}var s=1e3*60*60*24;var a=new Date(i,e,1);var o=new Date(a.getTime()-s);return{startDate:fy.formatDate(n),endDate:fy.formatDate(o)}};fy.GetCurrentWeekRange=function(t){var e=t.getDay();var i=t.getDate();var n=1e3*60*60*24;var s=e!=0?e-1:6;var a=new Date(t.getTime()-s*n);var o=new Date(a.getTime()+6*n);return{startDate:fy.formatDate(a),endDate:fy.formatDate(o)}};fy.getMonthDays=function(t,e){var i=new Date(t,e,1);var n=i.getMonth();var s=i.getFullYear();if(n==11){s++;n=0}else{n++}var a=1e3*60*60*24;var o=new Date(s,n,1);return new Date(o.getTime()-a).getDate()};fy.getQuarterSeasonStartMonth=function(t){var e=0;var i=3;var n=6;var s=9;if(t<3){return e}if(t<6){return i}if(t<9){return n}return s};fy.timeZone=(new Date).getTimezoneOffset();fy.formatDate=function(t,e){var i=e||"yyyy-MM-dd";var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours()>12?t.getHours()-12:t.getHours(),"H+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};if(/(y+)/.test(i))i=i.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length));for(var s in n)if(new RegExp("("+s+")").test(i))i=i.replace(RegExp.$1,RegExp.$1.length==1?n[s]:("00"+n[s]).substr((""+n[s]).length));return i};fy.parseDate=function(t,e){var i=e||"yyyy-MM-dd HH:mm:ss";var n=t.match(/(\d+)/g),s=0,a={};i.replace(/(yyyy|dd|MM|HH|hh|mm|ss)/g,function(t){a[t]=s++});if(!a["HH"]&&a["hh"])a["HH"]=a["hh"];return new Date(n[a["yyyy"]]||0,(n[a["MM"]]||1)-1,n[a["dd"]]||0,n[a["HH"]]||0,n[a["mm"]]||0,n[a["ss"]]||0)};(function(){var t=new Date("2011-06-02T09:34:29+02:00");if(!t||isNaN(t)||!isNaN(t)&&+t===1307000069e3){fy.parseIsoDate=function(t){var e,i,n=/^(\d{4}\-\d\d\-\d\d([tT ][\d:\.]*)?)([zZ]|([+\-])(\d\d):(\d\d))?$/,s=n.exec(t)||[];if(s[1]){e=s[1].split(/\D/);for(var a=0,o=e.length;a<o;a++){e[a]=parseInt(e[a],10)||0}e[1]-=1;e=new Date(Date.UTC.apply(Date,e));if(!e.getDate())return NaN;if(s[5]){i=parseInt(s[5],10)*60;if(s[6])i+=parseInt(s[6],10);if(s[4]=="+")i*=-1;if(i)e.setUTCMinutes(e.getUTCMinutes()+i)}return e}return NaN}}else{fy.parseIsoDate=function(t){return new Date(t)}}})();fy.parseJsonDate=function(t,e){if(!t)return"";var i;if(t.indexOf("/Date(")!=-1){t=parseInt(t.substr(6),10);i=new Date(t)}else{i=fy.parseIsoDate(t);if(t.indexOf("+")===-1)i=fy.addSeconds(i,fy.timeZone*60)}return fy.formatDate(i,e)};var number_format=fy.formatNumber=function(t,e,i,n){var s=t,a=isNaN(e=Math.abs(e))?2:e;var o=i==undefined?".":i;var r=n==undefined?",":n,l=s<0?"-":"";var d=parseInt(s=Math.abs(+s||0).toFixed(a))+"",h=(h=d.length)>3?h%3:0;var c=l+(h?d.substr(0,h)+r:"")+d.substr(h).replace(/(\d{3})(?=\d)/g,"$1"+r)+(a?o+Math.abs(s-d).toFixed(a).slice(2):"");return n?c:parseFloat(c,10)};fy.formatFilesize=function(t){if(t>=1073741824){t=number_format(t/1073741824,2,".",",")+" GB"}else if(t>=1048576){t=number_format(t/1048576,2,".","")+" MB"}else if(t>=1024){t=number_format(t/1024,0)+" KB"}else{t=number_format(t,0)+" bytes"}return t};fy.timeStamp=function(){var t=new Date,e=new Date(2012,11,22);return(t.valueOf()-e.valueOf()).toString()};fy.random=function(t){return(Math.random()*Math.random()).toString().substr(2,t||9)};fy.uuid=function(){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");return function(e,i){var n=t,s=[];i=i||n.length;if(e){for(var a=0;a<e;a++)s[a]=n[0|Math.random()*i]}else{var o;s[8]=s[13]=s[18]=s[23]="-";s[14]="4";for(var a=0;a<36;a++){if(!s[a]){o=0|Math.random()*16;s[a]=n[a==19?o&3|8:o]}}}return s.join("")}}();fy.convertImageToBase64=function(t){var e=document.createElement("canvas");e.width=t.width;e.height=t.height;var i=e.getContext("2d");i.drawImage(t,0,0);var n=e.toDataURL("image/png");return n.replace(/^data:image\/(png|jpg);base64,/,"")};fy.preloadImage=function(t,e,i){var n=new Image;n.onload=function(){n.onload=null;if(typeof e==="function")e(n);n=null};n.onerror=function(){n.onerror=null;n=null;if(typeof i==="function")i()};n.src=t};fy.loadFile=function(t,e,n,s){n=n||fy.EMPTY_FN;s=s||fy.EMPTY_FN;var a;if(e==="js"){var o=document.getElementsByTagName("script");for(i=0;i<o.length;i++){if(o[i].src&&o[i].src.indexOf(t)!=-1){return n()}}a=document.createElement("script");document.getElementsByTagName("head")[0].appendChild(a);a.setAttribute("type","text/javascript");a.setAttribute("src",t)}else if(e==="css"){if(document.createStyleSheet){a=document.createStyleSheet(t)}else{a=document.createElement("link");document.getElementsByTagName("head")[0].appendChild(a);a.setAttribute("rel","stylesheet");a.setAttribute("type","text/css");a.setAttribute("href",t)}}a.onload=a.onreadystatechange=function(){if(this.readyState&&this.readyState=="loading")return;n();n=null};a.onerror=function(){document.getElementsByTagName("head")[0].removeChild(a);s();s=null};return a};fy.removeFile=function(t,e){var i=e=="js"?"script":e=="css"?"link":"none";var n=e=="js"?"src":e=="css"?"href":"none";var s=document.getElementsByTagName(i);for(var a=s.length;a>=0;a--){if(s[a]&&s[a].getAttribute(n)!=null&&s[a].getAttribute(n).indexOf(t)!=-1)s[a].parentNode.removeChild(s[a])}};fy.cache=function(t,e){if(!top.window["__CACHE__"])top.window["__CACHE__"]={};var i=top.window["__CACHE__"];if(typeof e!=="undefined"){i[t]=e}return i[t]};fy.removeCache=function(t){if(!top.window["__CACHE__"])return;var e=top.window["__CACHE__"];if(t&&e[t]!==undefined){e[t]=null;delete e[t]}else top.window["__CACHE__"]={}};fy.cleanValueObject=function(t){for(var e in t)if(e.indexOf(":")>-1)delete t[e];return t};fy.HTML={clean:function(t){return $("<div>"+t+"</div>").text()},encode:function(t){var e=document.createElement("div");e.innerText?e.innerText=t:e.textContent=t;var i=e.innerHTML;e=null;return i},decode:function(t){var e=document.createElement("div");e.innerHTML=t;var i=e.innerText||e.textContent;e=null;return i},desEncode:function(t){var e=[];for(var i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return"&#"+e.join(";&#")+";"},hexEncode:function(t){var e=[];for(var i=0;i<t.length;i++)e[i]=t.charCodeAt(i).toString(16);return"&#x"+e.join(";&#x")+";"},encodeSBC:function(t){var e="",i;for(var n=0;n<t.length;n++){i=t.charCodeAt(n);e+=i<32||i==38||i>127?"&#"+i+";":t.charAt(n)}return e},desHexDecode:function(t){return t.replace(/&#(x)?([^&]{1,5});?/g,function(t,e,i){return String.fromCharCode(parseInt(i,e?16:10))})},toDBC:function(t){var e="",i;for(var n=0;n<t.length;n++){i=t.charCodeAt(n);if(i>=65281&&i<=65374)e+=String.fromCharCode(i-65248);else if(i==12288)e+=String.fromCharCode(32);else e+=t.charAt(n)}return e},toSBC:function(t){var e="",i;for(var n=0;n<t.length;n++){i=t.charCodeAt(n);if(i>=33&&i<=126)e+=String.fromCharCode(i+65248);else if(i==32)e+=String.fromCharCode(12288);else e+=t.charAt(n)}return e},toUTF8:function(t){if(typeof t!=="string"){throw new TypeError("toUTF8 function only accept a string as its parameter.")}var e=[];var i,n,s;var a=0;for(var o=0,r=t.length;o<r;o++){a=t.charCodeAt(o);if(a>65535){throw new Error("InvalidCharacterError")}if(a>128){if(a<2047){i=String.fromCharCode(a>>>6|192);n=String.fromCharCode(a&63|128);e.push(i,n)}else{i=String.fromCharCode(a>>>12|224);n=String.fromCharCode(a>>>6&63|128);s=String.fromCharCode(a&63|128);e.push(i,n,s)}}else{e.push(t[o])}}return e.join("")},fromUTF8:function(t){if(typeof t!=="string"){throw new TypeError("fromUTF8 function only accept a string as its parameter.")}if(/[^\x20-\xEF]/.test(t)){throw new Error("InvalidCharacterError")}var e=[];var i=0;var n=0;for(var s=0,a=t.length;s<a;){i=t.charCodeAt(s++);if(i>224){n=(i&15)<<12;i=t.charCodeAt(s++);n|=(i&63)<<6;i=t.charCodeAt(s++);n|=i&63;e.push(String.fromCharCode(n))}else if(i>192){n=(i&31)<<6;i=t.charCodeAt(s++);n|=(i&63)<<6;e.push(String.fromCharCode(n))}else if(i>128){}else{e.push(t[s])}}return e.join("")}};fy.printIframe=function(t){if(fy.browser.msie){t.document.execCommand("print",false,null)}else{t.print()}};var Validate={};Validate.isset=function(t){return!!t};Validate.empty=function(t){return String(t).replace(/\s+/g,"").length==0};Validate.required=function(t){return!Validate.empty(t)};Validate.email=function(t){return/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i.test(t)};Validate.url=function(t){return/[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?/i.test(t)};Validate.date=function(t,e){var i=Date.parse(t);if(isFinite(i)){return true}if(e){var n=new Date;t=t.replace(/\d{4}/,n.getFullYear());i=Date.parse(t);return isFinite(i)}return false};Validate.time=function(t){var e=new RegExp("^/[0-2]{1}/[0-6]{1}:/[0-5]{1}/[0-9]{1}:/[0-5]{1}/[0-9]{1}");return e.test(t)};Validate.zip=function(t,e){var i=e?/^\d{5}-\d{4}$/:/^\d{5}$/;return i.test(t)};Validate.phone=function(t){return/^\(?([0-9]{3})\)?[-.\s]?([0-9]{3})[-.\s]?([0-9]{4})$/.test(t)};Validate.integer=function(t){return/^\-?\d+$/.test(t)};Validate.numeric=function(t){return/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)};Validate.currency=function(t,e){return/^\$-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)};Validate.ip=function(t){return/^((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){3}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})$/.test(t)};Validate.ssn=function(t){return/^\d{3}-\d{2}-\d{4}$/.test(t)};Validate.tin=function(t){return/^\d{2}-\d{7}$/.test(t)};Validate.base64=function(t){return/[^a-zA-Z0-9\/\+=]/i.test(t)};Validate.alpha=function(t){return/^[a-z]$/i.test(t)};Validate.alphaNumeric=function(t){return/^[a-z0-9]$/i.test(t)};Validate.lowercase=function(t){return t.toLowerCase()==t};Validate.uppercase=function(t){return t.toUpperCase()==t};Validate.minlength=function(t,e){return t.length>=e};Validate.maxlength=function(t,e){return t.length<=e};Validate.between=function(t,e,i){return t.length>=e&&t.length<=i};fy.validates=Validate;fy.sortOn=function(t,e,i){if(i&&typeof i==="function")return t.sort(i);else{var n=Array.prototype.slice.call(t,0);if(!arguments.length)return n.sort();return n.sort(function(t,i){var n=t[e],s=isNaN(n),a=i[e],o=isNaN(a);if(s&&o){if(n==="")return-1;if(a==="")return 1;return n===a?0:n>a?1:-1}else if(s)return-1;else if(o)return 1;return n===a?0:n>a?1:-1})}};fy.is={types:["Array","RegExp","Date","Number","String","Object","HTMLDocument"]};for(var i=0,c;c=fy.is.types[i++];){fy.is[c]=function(t){return function(e){return Object.prototype.toString.call(e)=="[object "+t+"]"}}(c)}fy.setLanguage=function(t,e){var i,n=window.document;if(e===undefined){var s;for(s in t){var a=s.indexOf("::");if(a!==-1){var o=s.substr(0,a),r=s.substr(a+2);i=$(r,"#"+o);for(var l=0,d=i.length;l<d;l++){var h=i[l];h.innerText?h.innerText=t[s][l]:h.textContent=t[s][l]}}else{a=s.indexOf("@");if(a>-1){var o=s.substr(0,a),c=s.substr(++a);$("#"+o).attr(c,t[s])}else{i=n.getElementById(s);if(i)$(i).html(t[s])}}}}else{var u;for(var f=1,p=arguments.length;f<p;f++){u=arguments[f];i=n.getElementById(u);if(i&&t[u])$(i).html(t[u])}}return fy};fy.thread=function(t,e){var i={startIndex:0,caller:window,itemRender:null,stepLength:5e3,onStart:null,onProgress:null,onComplete:null};var n=$.extend(i,e);var s=n.itemRender,a=t.length,o=0,r=0;if(n.onStart)n.onStart.call(n.caller,t);l(n.startIndex,n.stepLength);function l(){var e=s||false,i=n.caller,d=n.stepLength;if(n.onProgress)n.onProgress.call(i,r,t);for(var h=0;h<d;h++){if(r===a){if(n.onComplete)n.onComplete.call(i,t);n=s=t=r=d=e=i=null;return}else{++r;if(e)e.call(i,r,t[r],t)}}o=setTimeout(l,0)}};fy.benchMark=function(t,e,i){var n=e||5e3,s=i||1;if(s===1)return r();else{var a=0;for(var o=0;o<s;o++)a+=r();return a/s}function r(){var e=new Date,i=0;for(;i<n;i++)t();return(new Date).getTime()-e.getTime()}};fy.delayExecute=function(t,e,i){var n=i||100;var s=window.setInterval(function(){if(t()){window.clearInterval(s);e()}},n)};fy.timerManager={interval:0,timer:{},has:function(t){return t in this.timer},once:function(t){if(this.timer[t.id])throw new Error("id conflict");t[":stamp"]=(new Date).getTime();t[":once"]=true;this.timer[t.id]=t;return this},add:function(t){if(this.timer[t.id])throw new Error("id conflict");t[":stamp"]=(new Date).getTime();this.timer[t.id]=t;return this},remove:function(t){var e;if(typeof t==="string")e=t;else if(t.id)e=t.id;if(this.timer[e])delete this.timer[e];return this},trigger:function(){var t=fy.timerManager.timer,e,i,n=(new Date).getTime();for(e in t){i=t[e];if(n-i[":stamp"]>=i.timeOut){i[":stamp"]=n;i.fn();if(i[":once"])this.remove(cfg.id)}}return this},run:function(t){if(this.interval)this.stop();this.interval=setInterval(fy.timerManager.trigger,t||1e3);return this},stop:function(){if(this.interval){clearInterval(this.interval);this.interval=0}return this}};var pfx=["","webkit","ms","moz","o"];fy.runPrefixMethod=function(t,e){var i=0,n,s;while(i<pfx.length&&!t[n]){n=e;if(pfx[i]===""){n=n.substr(0,1).toLowerCase()+n.substr(1)}n=pfx[i]+n;s=typeof t[n];if(s!="undefined"){pfx=[pfx[i]];return s==="function"?t[n]():t[n]}i++}return false};var TAGNAMES={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};fy.isEventSupported=function t(e,i){i=i||document.createElement(TAGNAMES[e]||"div");e="on"+e;var n=e in i;if(!n){if(!i.setAttribute){i=document.createElement("div")}if(i.setAttribute&&i.removeAttribute){i.setAttribute(e,"");n=typeof i[e]=="function";if(typeof i[e]!="undefined"){i[e]=void 0}i.removeAttribute(e)}}i=null;return n};var matched=function(t){t=t.toLowerCase();var e=/(edge)\/([\w.]+)/.exec(t)||/(opr)[\/]([\w.]+)/.exec(t)||/(chrome)[ \/]([\w.]+)/.exec(t)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];var i=/(ipad)/.exec(t)||/(ipod)/.exec(t)||/(iphone)/.exec(t)||/(android)/.exec(t)||/(windows phone)/.exec(t)||/(win)/.exec(t)||/(mac)/.exec(t)||/(linux)/.exec(t)||/(cros)/.exec(t)||[];return{browser:e[5]||e[3]||e[1]||"",version:e[2]||e[4]||"0",platform:i[0]||""}}(window.navigator.userAgent);var browser={};if(matched.browser){browser[matched.browser]=true;browser.version=matched.version;browser.versionNumber=parseInt(matched.version,10)}if(matched.platform){browser[matched.platform]=true}if(browser.android||browser.ipad||browser.iphone||browser.ipod||browser["windows phone"]){browser.mobile=true}if(browser.cros||browser.mac||browser.linux||browser.win){browser.desktop=true}if(browser.chrome||browser.opr||browser.safari){browser.webkit=true}if(browser.rv||browser.edge){var ie="msie";matched.browser=ie;browser[ie]=true}if(browser.opr){var opera="opera";matched.browser=opera;browser[opera]=true}if(browser.safari&&browser.android){var android="android";matched.browser=android;browser[android]=true}browser.name=matched.browser;browser.platform=matched.platform;browser.touchable=fy.isEventSupported("touchstart",document);fy.browser=browser;$.browser=fy.browser;fy.deepClone=function(t){return JSON.parse(JSON.stringify(t))};fy.select=function(t){var e;if(fy.browser.msie){if(t.createTextRange){e=t.createTextRange()}else{e=document.body.createTextRange();e.collapse();e.moveToElementText(t)}e.moveEnd("character",0);e.moveStart("character",-1);e.select()}else{if(t.setSelectionRange){t.focus();t.select()}else{var i=window.getSelection();i.setBaseAndExtent(t,0,t,1)}}};fy.cutChars=function(t,e){var i=t.length;if(i*2<=e){return t}for(var n=0,s=0;n<i;n++){if(t.charCodeAt(n)>256){s+=2;if(s>e){return t.substring(0,n-1)+"…"}}else{s++;if(s>e){return t.substring(0,n-2)+"…"}}}return t};fy.quickSort=function(){function t(t,i,n){var s=t[n-1],a=i,o;for(o=i;o<n-1;o+=1){if(t[o]<=s){e(t,o,a);a+=1}}e(t,a,n-1);return a}function e(t,e,i){var n=t[e];t[e]=t[i];t[i]=n;return t}function i(e,n,s){if(n<s){var a=t(e,n,s);i(e,n,a);i(e,a+1,s)}return e}return function(t){return i(t,0,t.length)}}();fy.heapSort=function(){function t(e,i,n){var s=2*i+1,a=2*i+2,o=i;if(s<n&&e[s]>e[i])o=s;if(a<n&&e[a]>e[o])o=a;if(o!==i){var r=e[i];e[i]=e[o];e[o]=r;t(e,o,n)}}function e(e){for(var i=Math.floor(e.length/2);i>=0;i-=1){t(e,i,e.length)}return e}return function(i){var n=i.length,s;e(i);for(var a=i.length-1;a>0;a-=1){s=i[0];i[0]=i[a];i[a]=s;n-=1;t(i,0,n)}return i}}();fy.calc={add:function(t,e,i){t=t.toString();e=e.toString();var n=t.split("."),s=e.split("."),a=n.length==2?n[1]:"",o=s.length==2?s[1]:"";var r=Math.max(a.length,o.length);var l=Math.pow(10,r);var d=Number(((t*l+e*l)/l).toFixed(r));return typeof i==="number"?Number(d.toFixed(i)):d},sub:function(t,e,i){return fy.calc.add(t,-Number(e),i)},mul:function(t,e){var i=t.toString(),n=e.toString(),s,a,o=arguments[2];s=(i.split(".")[1]?i.split(".")[1].length:0)+(n.split(".")[1]?n.split(".")[1].length:0);a=Number(i.replace(".",""))*Number(n.replace(".",""))/Math.pow(10,s);return typeof o!=="number"?Number(a):Number(a.toFixed(parseInt(o)))},div:function(t,e,i){var n;if(e===0){n=0}else{var s=t.toString(),a=e.toString(),o,i=arguments[2];o=(a.split(".")[1]?a.split(".")[1].length:0)-(s.split(".")[1]?s.split(".")[1].length:0);n=Number(s.replace(".",""))/Number(a.replace(".",""))*Math.pow(10,o)}return typeof i!=="number"?Number(n):Number(n.toFixed(parseInt(i)))},percent:function(t,e,i){i=typeof i==="undefined"?1:i;if(e==0)return"--%";return Number(Math.round(t/e*1e4)/100).toFixed(i)+"%"},stdEVP:function(t,e,i){var n=0;for(var s=0,a=t.length;s<a;s++){var o=t[s]-e;n+=o*o}var r=Math.sqrt(n/a);return typeof i!=="number"?r:Number(r.toFixed(parseInt(i)))},median:function(t,e){var i=t.length,n=Math.ceil(fy.calc.div(i,2))-1;if(i%2){return t[n]}else{var s=Math.floor(i*.5),a=t[s]+t[n];return fy.calc.div(a,2,e)}},rank:function(t){var e=fy.quickSort(t.slice(0)).reduce(function(t,e,i){t[e]=i;return t},Object.create(null));return t.map(function(i){return t.length-e[i]})},segments:function(t,e,i,n){n=n||2;var s=[],a=t;var o=fy.calc.div(e-t,i,4),r=1/Math.pow(10,n);for(var l=0;l<i;l++){var d=o+a;var h={count:0,from:fy.formatNumber(a,n),to:l===i-1?e:fy.formatNumber(d-r,n)};h.key=Math.floor(h.from)+"-"+Math.floor(h.to);s.push(h);a=d}return s}};fy.convert={units:"个十百千万@#%亿^&~",chars:"零一二三四五六七八九",numberToChinese:function(t){var e=(t+"").split(""),i=[],n=this;if(e.length>12){throw new Error("too big")}else{for(var s=0,a=e.length-1;s<=a;s++){if(a==1||a==5||a==9){if(s==0){if(e[s]!="1")i.push(n.chars.charAt(e[s]))}else{i.push(n.chars.charAt(e[s]))}}else{i.push(n.chars.charAt(e[s]))}if(s!=a){i.push(n.units.charAt(a-s))}}}return i.join("").replace(/零([十百千万亿@#%^&~])/g,function(t,i,s){s=n.units.indexOf(i);if(s!=-1){if(i=="亿")return i;if(i=="万")return i;if(e[a-s]=="0")return"零"}return""}).replace(/零+/g,"零").replace(/零([万亿])/g,function(t,e){return e}).replace(/亿[万千百]/g,"亿").replace(/[零]$/,"").replace(/[@#%^&~]/g,function(t){return{"@":"十","#":"百","%":"千","^":"十","&":"百","~":"千"}[t]}).replace(/([亿万])([一-九])/g,function(t,i,s,o){o=n.units.indexOf(i);if(o!=-1){if(e[a-o]=="0")return i+"零"+s}return t})},stringToDate:fy.parseDate,jsonToDate:fy.parseJsonDate,hashToArray:function(t){var e=[];for(e[e.length]in t);return e},arrayToHash:function(t,e){var i={},n=0,s=t.length;for(;n<s;n++){var a=t[n];if(!(a[e]in i)){i[a[e]]=a}}return i}};fy.combineArrays=function(t){var e=[];for(var i=0,n=arguments.length;i<n;i++){var s=arguments[i],a=s.length;for(var o=0;o<a;o=o+5e3){e.push.apply(e,s.slice(o,o+5e3))}}return e}})(window,jQuery,fy);(function(t){jQuery.fn.clone=function(){var e=t.apply(this,arguments),i=this.find("textarea").add(this.filter("textarea")),n=e.find("textarea").add(e.filter("textarea")),s=this.find("select").add(this.filter("select")),a=e.find("select").add(e.filter("select"));for(var o=0,r=i.length;o<r;++o)$(n[o]).val($(i[o]).val());for(var o=0,r=s.length;o<r;++o)a[o].selectedIndex=s[o].selectedIndex;return e}})(jQuery.fn.clone);(function(t){t.fn.extend({syncCheckBoxGroup:function(e,i){var n=$(this);t(i||document).on("change",e,function(){var s=t(e,i||document),a=s.length;n.prop("checked",s.filter(":checked").length===a)});n.change(function(){t(e,i||document).prop("checked",this.checked)});return this},labelledInput:function(e){var e=t.extend({text:"key words",labelledClass:"fLightgray"},e);return this.each(function(){t(this).val(e.text).addClass(e.labelledClass).focus(function(){if(t(this).val()==e.text){t(this).val("").removeClass(e.labelledClass)}}).blur(function(){if(t.trim(t(this).val())==""){t(this).val(e.text).addClass(e.labelledClass)}})})},fieldsToJson:function(){var e={},i,n;if(this[0].tagName!=="FORM"){var s=$("<form/>").append(this.clone());n=s;i=s.serializeArray();s=null}else{n=this;i=this.serializeArray()}t.each(i,function(){var i=this.name.indexOf("[]"),s=!(i===-1),a=s?this.name.substr(0,i):this.name,o=t.trim(this.value+"")||"";if(n.find('[name="'+this.name+'"]').eq(0).attr("type")==="number"){o=parseFloat(o,10)}if(e[a]){if(!e[a].push)e[a]=[e[a]];e[a].push(o)}else{if(s){e[a]=[];e[a][0]=o}else e[a]=o}});n=null;return e},jsonToFields:function(e){this.find("input,select,textarea").each(function(){if(!this.name){if(this.id)this.name=this.id;else return}var i=this.name.split("[]")[0];var n=e[i];if(this.type=="checkbox"||this.type=="radio"){var s=t.isArray(n)?n:[n];var a=t.isNumeric(this.value)?parseInt(this.value,10):this.value;for(var o=0;o<s.length;o++){if(s[o]==a){this.checked=true;break}}}else if(this.type.indexOf("select-")!=-1){t(this).recheckElement(n)}else if(this.tagName.toLowerCase()=="textarea"){$(this).val(n)}else{if(n===undefined||n===null)n="";this.value=n}});return this},recheck:function(e){var i=t.isArray(e)?e:[e];var n=this[0].options?"selected":"checked";var s=n=="selected"?this[0].options:this;return $(s).prop(n,false).filter(function(){return t.inArray(this.value,i)!=-1}).prop(n,true).end()},recheckElement:function(e){var i=t.isArray(e)?e:[e];var n,s,a;if(this.prop("tagName").toLowerCase()=="select"){n=this[0].options;s=this.attr("type")!="select-multiple";a=true}else{n=this;s=this.attr("type")=="radio";a=false}var o,r,l;t:for(var d=0,h=n.length;d<h;d++){o=n[d];l=false;r=o.value;e:for(var c=0,u=i.length;c<u;c++){if(r==i[c]){if(s){a?o.selected=true:o.checked=true;break t}else{l=true;break e}}}a?o.selected=l:o.checked=l}return this}});$.fn.decimalMask=function(t){if(!t||!t.match){throw"decimalMask: you must set the mask string."}var e,i=/^-/.test(t)?"(-)?":"",n=function(){e=t.match(/[0-9]{1,}/);return e!==null?e[0].length:0}(),s=function(){e=t.match(/[0-9]{1,}$/);return e!==null?e[0].length:0}(),a=function(){e=t.match(/,|\./);return e!==null?e[0]:null}(),o=/.*MSIE 8.*|.*MSIE 7.*|.*MSIE 6.*|.*MSIE 5.*/.test(navigator.userAgent)?"keyup propertychange paste":"input paste",r=a===null?new RegExp("^"+i+"[0-9]{0,"+n+"}$"):new RegExp("^"+i+"[0-9]{0,"+n+"}"+(a==="."?"\\.":",")+"[0-9]{0,"+s+"}$|^"+i+"[0-9]{0,"+n+"}"+(a==="."?"\\.":",")+"$|^"+i+"[0-9]{0,"+n+"}$");function l(t){var e=$(t.currentTarget);if(e.val()!==t.data.ov){if(!r.test(e.val())){e.val(t.data.ov)}t.data.ov=e.val()}}return this.each(function(){$(this).attr("maxlength",n+s+(a===null?0:1)+(i===""?0:1)).val($(this).val()?$(this).val().replace(".",a):$(this).val()).on(o,{ov:$(this).val()},l)})}})(jQuery);(function(t){function e(){var t=document.createElement("input"),e="onpaste";t.setAttribute(e,"");return typeof t[e]==="function"?"paste":"input"}var i=e()+".mask",n=navigator.userAgent,s=/iphone/i.test(n),a=/android/i.test(n),o;t.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn",placeholder:"_"};t.fn.extend({caret:function(t,e){var i;if(this.length===0||this.is(":hidden")){return}if(typeof t=="number"){e=typeof e==="number"?e:t;return this.each(function(){if(this.setSelectionRange){this.setSelectionRange(t,e)}else if(this.createTextRange){i=this.createTextRange();i.collapse(true);i.moveEnd("character",e);i.moveStart("character",t);i.select()}})}else{if(this[0].setSelectionRange){t=this[0].selectionStart;e=this[0].selectionEnd}else if(document.selection&&document.selection.createRange){i=document.selection.createRange();t=0-i.duplicate().moveStart("character",-1e5);e=t+i.text.length}return{begin:t,end:e}}},unmask:function(){return this.trigger("unmask")},mask:function(e,n){var r,l,d,h,c,u;if(!e&&this.length>0){r=t(this[0]);return r.data(t.mask.dataName)()}n=t.extend({placeholder:t.mask.placeholder,completed:null},n);l=t.mask.definitions;d=[];h=u=e.length;c=null;t.each(e.split(""),function(t,e){if(e=="?"){u--;h=t}else if(l[e]){d.push(new RegExp(l[e]));if(c===null){c=d.length-1}}else{d.push(null)}});return this.trigger("unmask").each(function(){var r=t(this),f=t.map(e.split(""),function(t,e){if(t!="?"){return l[t]?n.placeholder:t}}),p=r.val();function y(t){while(++t<u&&!d[t]);return t}function g(t){while(--t>=0&&!d[t]);return t}function m(t,e){var i,s;if(t<0){return}for(i=t,s=y(e);i<u;i++){if(d[i]){if(s<u&&d[i].test(f[s])){f[i]=f[s];f[s]=n.placeholder}else{break}s=y(s)}}C();r.caret(Math.max(c,t))}function b(t){var e,i,s,a;for(e=t,i=n.placeholder;e<u;e++){if(d[e]){s=y(e);a=f[e];f[e]=i;if(s<u&&d[s].test(a)){i=a}else{break}}}}function v(t){var e=t.which,i,n,a;if(e===8||e===46||s&&e===127){i=r.caret();n=i.begin;a=i.end;if(a-n===0){n=e!==46?g(n):a=y(n-1);a=e===46?y(a):a}w(n,a);m(n,a-1);t.preventDefault()}else if(e==27){r.val(p);r.caret(0,k());t.preventDefault()}}function x(e){var i=e.which,s=r.caret(),o,l,h;if(e.ctrlKey||e.altKey||e.metaKey||i<32){return}else if(i){if(s.end-s.begin!==0){w(s.begin,s.end);m(s.begin,s.end-1)}o=y(s.begin-1);if(o<u){l=String.fromCharCode(i);if(d[o].test(l)){b(o);f[o]=l;C();h=y(o);if(a){setTimeout(t.proxy(t.fn.caret,r,h),0)}else{r.caret(h)}if(n.completed&&h>=u){n.completed.call(r)}}}e.preventDefault()}}function w(t,e){var i;for(i=t;i<e&&i<u;i++){if(d[i]){f[i]=n.placeholder}}}function C(){r.val(f.join(""))}function k(t){var e=r.val(),i=-1,s,a;for(s=0,pos=0;s<u;s++){if(d[s]){f[s]=n.placeholder;while(pos++<e.length){a=e.charAt(pos-1);if(d[s].test(a)){f[s]=a;i=s;break}}if(pos>e.length){break}}else if(f[s]===e.charAt(pos)&&s!==h){pos++;i=s}}if(t){C()}else if(i+1<h){r.val("");w(0,u)}else{C();r.val(r.val().substring(0,i+1))}return h?s:c}r.data(t.mask.dataName,function(){return t.map(f,function(t,e){return d[e]&&t!=n.placeholder?t:null}).join("")});if(!r.attr("readonly"))r.one("unmask",function(){r.unbind(".mask").removeData(t.mask.dataName)}).bind("focus.mask",function(){clearTimeout(o);var t,i;p=r.val();t=k();o=setTimeout(function(){C();if(t==e.length){r.caret(0,t)}else{r.caret(t)}},10)}).bind("blur.mask",function(){k();if(r.val()!=p)r.change()}).bind("keydown.mask",v).bind("keypress.mask",x).bind(i,function(){setTimeout(function(){var t=k(true);r.caret(t);if(n.completed&&t==r.val().length)n.completed.call(r)},0)});k()})}})})(jQuery);(function(t){var e={m_Count:0,make:function(t){var e=t.template,i={name:e},n=t["nullShown"]||"",s=/{\w+(:=)+\w+}/g,a=e.match(s),o='row[":index"]=i;';if(a){var r,l,d;for(var h=0;h<a.length;h++){r=a[h].substr(1,a[h].length-2);l=r.indexOf(":=");d=r.substr(0,l);o+="row['"+r+"']=scope['"+r.substr(l+2)+"'](row['"+d+"'] , i , row ,'"+d+"') ;"}}var c=/\{(\w*[:]*[=]*\w+)\}(?!})/g,u=e.replace(c,function(t,e,i){return"'+((row['"+e+"']===null||row['"+e+"']===undefined||Infinity===row['"+e+"'])?'"+n+"':row['"+e+"'])+'"});o+="var out='"+u+"';return out;";i["render"]=new Function("row","i","scope",o);if(t.mode)i.mode=t.mode;if(t.itemRender)i.itemRender=t.itemRender;if(t.itemFilter)i.itemFilter=t.itemFilter;if(t.onBound)i.onBound=t.onBound;i.joiner=t.joiner||"";i.storeData=!!t.storeData;return i},newId:function(){return"_Object__id"+this.m_Count++},remove:function(t){delete this[t]}};var i={setup:function(n,s,a){var o=e.make(n.renderer);t.extend(n,o);if(n.pagination){n.isRst=true;if(!o.pagination||!set.pagination.callback){n.pagination.callback=function(t,n){var o=e[a];if(o.isRst)o.isRst=false;else i.fetchPage(t,s,o);return false}}}e[a]=n;if(typeof n.onInit==="function"){n.onInit.call(s)}return!n.stepRun},fetchPage:function(i,n,s){var a=typeof s==="string"?e[s]:s;var o=a.loader,r=a.pagination,l=a.search||{};l.pageIndex=i||0;if(typeof a.onStart==="function"){a.onStart.call(n,l)}if(o)o.show();t.getJSON(a.url,l,function(t){if(o)o.hide();var e=t.data?t.data:t,i=t.page;if(e.length==0){if(typeof a.onNoRecord==="function"){a.onNoRecord.call(n,l)}else{if(r){r.placement.text("无符合条件的记录")}}}else{n.bindList(e);if(r&&a.isRst){r.placement.pagination(i.rowCount,r)}}if(typeof a.onComplete==="function"){a.onComplete.call(n,t.data,i)}});return false},reset:function(t,e,i){i.isRst=true;return!i.stepRun},setValue:function(e,i,n){t.extend(n,e);n.isRst=true;return!n.stepRun}};t.fn.bindUrl=function(t,n){var s=i;var a=this[0],o=a.id||a.uniqueID,r;if(t!="setup"){r=e[o]}else{if(!o){o=a.id=e.newId()}r=o}var l=s[t]||s["fetchPage"];if(l(n,this,r)){s.fetchPage(0,this,r)}return this};t.fn.bindList=function(t){var i=this[0],n=i.id||i.uniqueID||function(){i.id=e.newId();return i.id}();var s=e[n]||{},a,o,r,l,d,h,c;if(t.push&&t.slice){o=t;r=s.itemRender;l=s.itemFilter;d=s.mode;h=s.storeData}else{a=t.template;if(a!==undefined&&s["name"]!=a){s=e.make(t);e[n]=s}o=t.list;r=t.itemRender||s.itemRender;l=t.itemFilter||s.itemFilter;d=t.mode||s.mode;h=!!t.storeData}var u=r||t.renderScope||window,f=[],p=0,y=0,g,m=typeof l==="function";if(h)c=[];for(;g=o[p];){if(m)g=l(g,p);if(g){g[":rowNum"]=++y;f[p]=s["render"](g,p,u);if(h)c.push(g)}++p}switch(d){case"append":this.append(f.join(s["joiner"]));break;case"prepend":this.prepend(f.join(s["joiner"]));break;case"after":this.after(f.join(s["joiner"]));break;case"before":this.before(f.join(s["joiner"]));break;default:if(document.all)this.html(f.join(s["joiner"]));else i.innerHTML=f.join(s["joiner"])}if(typeof s.onBound==="function"){s.onBound.call(this,o,t)}if(h)this.data("bound-array",c);return this};t.fn.bindLists=function(i){var n;if(i.mode==="setCache")n=i.cache;else n=e.make(i);this.each(function(t,i){var s=i.id||i.uniqueID||function(){i.id=e.newId();return i.id}();e[s]=n});if(t.isArray(i.lists)){var s=Math.min(this.size(),i.lists.length);for(var a=0;a<s;a++){i.list=i.lists[a];this.eq(a).bindList(i)}if(typeof i.onAllComplete==="function"){i.onAllComplete.call(this,i.lists,i)}}if(i.mode==="getCache"){return n}return this}})(jQuery);(function(t){t.PaginationCalculator=function(t,e){this.maxentries=t;this.opts=e};t.extend(t.PaginationCalculator.prototype,{numPages:function(){return Math.ceil(this.maxentries/this.opts.items_per_page)},getInterval:function(t){var e=Math.floor(this.opts.num_display_entries/2);var i=this.numPages();var n=i-this.opts.num_display_entries;var s=t>e?Math.max(Math.min(t-e,n),0):0;var a=t>e?Math.min(t+e+this.opts.num_display_entries%2,i):Math.min(this.opts.num_display_entries,i);return{start:s,end:a}}});t.PaginationRenderers={};t.PaginationRenderers.defaultRenderer=function(e,i){this.maxentries=e;this.opts=i;this.pc=new t.PaginationCalculator(e,i)};t.extend(t.PaginationRenderers.defaultRenderer.prototype,{createLink:function(e,i,n){var s,a=this.pc.numPages();e=e<0?0:e<a?e:a-1;n=t.extend({text:e+1,classes:""},n||{});if(e==i){s=t("<span class='current'>"+n.text+"</span>")}else{s=t("<a>"+n.text+"</a>").attr("href",this.opts.link_to.replace(/__id__/,e))}if(n.classes){s.addClass(n.classes)}if(n.rel){s.attr("rel",n.rel)}s.data("page_id",e);return s},appendRange:function(t,e,i,n,s){var a;for(a=i;a<n;a++){this.createLink(a,e,s).appendTo(t)}},getLinks:function(e,i){var n,s,a=this.pc.getInterval(e),o=this.pc.numPages(),r=t("<div class='pagination'></div>");if(this.opts.prev_text&&(e>0||this.opts.prev_show_always)){r.append(this.createLink(e-1,e,{text:this.opts.prev_text,classes:"prev",rel:"prev"}))}if(a.start>0&&this.opts.num_edge_entries>0){s=Math.min(this.opts.num_edge_entries,a.start);this.appendRange(r,e,0,s,{classes:"sp"});if(this.opts.num_edge_entries<a.start&&this.opts.ellipse_text){t("<span>"+this.opts.ellipse_text+"</span>").appendTo(r)}}this.appendRange(r,e,a.start,a.end);if(a.end<o&&this.opts.num_edge_entries>0){if(o-this.opts.num_edge_entries>a.end&&this.opts.ellipse_text){t("<span>"+this.opts.ellipse_text+"</span>").appendTo(r)}n=Math.max(o-this.opts.num_edge_entries,a.end);this.appendRange(r,e,n,o,{classes:"ep"})}if(this.opts.next_text&&(e<o-1||this.opts.next_show_always)){r.append(this.createLink(e+1,e,{text:this.opts.next_text,classes:"next",rel:"next"}))}t("a",r).click(i);return r}});t.fn.pagination=function(e,i){i=t.extend({items_per_page:10,num_display_entries:11,current_page:0,num_edge_entries:0,link_to:"#",prev_text:"Prev",next_text:"Next",ellipse_text:"...",prev_show_always:true,next_show_always:true,renderer:"defaultRenderer",show_if_single_page:false,load_first_page:true,callback:function(){return false}},i||{});var n=this,s,a,o;function r(e){var i,n=t(e.target).data("page_id"),s=l(n);if(!s){e.stopPropagation()}return s}function l(t){n.data("current_page",t);a=s.getLinks(t,r);n.empty();a.appendTo(n);var e=i.callback(t,n);return e}o=parseInt(i.current_page,10);n.data("current_page",o);e=!e||e<0?1:e;i.items_per_page=!i.items_per_page||i.items_per_page<0?1:i.items_per_page;if(!t.PaginationRenderers[i.renderer]){throw new ReferenceError("Pagination renderer '"+i.renderer+"' was not found in jQuery.PaginationRenderers object.")}s=new t.PaginationRenderers[i.renderer](e,i);var d=new t.PaginationCalculator(e,i);var h=d.numPages();n.off("setPage").on("setPage",{numPages:h},function(t,e){if(e>=0&&e<t.data.numPages){l(e);return false}});n.off("prevPage").on("prevPage",function(e){var i=t(this).data("current_page");if(i>0){l(i-1)}return false});n.off("nextPage").on("nextPage",{numPages:h},function(e){var i=t(this).data("current_page");if(i<e.data.numPages-1){l(i+1)}return false});n.off("currentPage").on("currentPage",function(){var e=t(this).data("current_page");l(e);return false});a=s.getLinks(o,r);n.empty();if(h>1||i.show_if_single_page){a.appendTo(n)}if(i.load_first_page){i.callback(o,n)}}})(jQuery);(function($){$.fn.editable=function(t,e){if("disable"==t){$(this).data("disabled.editable",true);return}if("enable"==t){$(this).data("disabled.editable",false);return}if("destroy"==t){$(this).unbind($(this).data("event.editable")).removeData("disabled.editable").removeData("event.editable");return}var i=$.extend({},$.fn.editable.defaults,{target:t},e);var n=$.editable.types[i.type].plugin||$.noop;var s=$.editable.types[i.type].submit||$.noop;var a=$.editable.types[i.type].buttons||$.editable.types["defaults"].buttons;var o=$.editable.types[i.type].content||$.editable.types["defaults"].content;var r=$.editable.types[i.type].element||$.editable.types["defaults"].element;var l=$.editable.types[i.type].reset||$.editable.types["defaults"].reset;var d=i.callback||$.noop;var h=i.onedit||$.noop;var c=i.onsubmit||$.noop;var u=i.onreset||$.noop;var f=i.onerror||l;if(i.tooltip){$(this).attr("title",i.tooltip)}i.autowidth="auto"==i.width;i.autoheight="auto"==i.height;return this.each(function(){var t=this;var e=$(t).width();var p=$(t).height();$(this).data("event.editable",i.event);if(!$.trim($(this).html())){$(this).html(i.placeholder)}$(this).bind(i.event,function(u){if(true===$(this).data("disabled.editable")){return}if(t.editing){return}if(false===h.apply(this,[i,t])){return}u.preventDefault();u.stopPropagation();if(i.tooltip){$(t).removeAttr("title")}if(0==$(t).width()){i.width=e;i.height=p}else{if(i.width!="none"){i.width=i.autowidth?$(t).width():i.width}if(i.height!="none"){i.height=i.autoheight?$(t).height():i.height}}if($(this).html().toLowerCase().replace(/(;|"|\/)/g,"")==i.placeholder.toLowerCase().replace(/(;|"|\/)/g,"")){$(this).html("")}t.editing=true;t.revert=$(t).html();$(t).html("");var y=$('<form class="editableForm" onsubmit="return false;" />');if(i.cssclass){if("inherit"==i.cssclass){y.attr("class",$(t).attr("class"))}else{y.attr("class",i.cssclass)}}if(i.style){if("inherit"==i.style){y.attr("style",$(t).attr("style"));y.css("display",$(t).css("display"))}else{y.attr("style",i.style)}}var g=r.apply(y,[i,t]);if(typeof i.onKeydown==="function")g.bind("keydown.fy",i.onKeydown);if(typeof i.onKeyup==="function")g.bind("keyup.fy",i.onKeyup);if(typeof i.onKeypress==="function")g.bind("keypress.fy",i.onKeypress);if(typeof i.onBlur==="function")g.bind("blur.fy",i.onBlur);if(typeof i.onPaste==="function")g.bind("paste.fy",i.onPaste);if(typeof i.onFocus==="function")g.bind("focus.fy",i.onFocus);if(typeof i.onClick==="function")g.bind("click.fy",i.onClick);var m;if(i.loadurl){var b=setTimeout(function(){g.disabled=true;o.apply(y,[i.loadtext,i,t])},100);var v={};v[i.id]=t.id;if($.isFunction(i.loaddata)){$.extend(v,i.loaddata.apply(t,[t.revert,i]))}else{$.extend(v,i.loaddata)}$.ajax({type:i.loadtype,url:i.loadurl,data:v,async:false,success:function(t){window.clearTimeout(b);m=t;g.disabled=false}})}else if(i.data){m=i.data;if($.isFunction(i.data)){m=i.data.apply(t,[t.revert,i])}}else{m=t.revert}o.apply(y,[m,i,t]);g.attr("name",i.name);a.apply(y,[i,t]);$(t).append(y);n.apply(y,[i,t]);$(":input:visible:enabled:first",y).focus();if(i.select){g.select()}g.keydown(function(e){if(e.keyCode==27){e.preventDefault();l.apply(y,[i,t])}});var b;if("cancel"==i.onblur){g.blur(function(e){b=setTimeout(function(){l.apply(y,[i,t])},30)})}else if("submit"==i.onblur){g.blur(function(t){b=setTimeout(function(){y.submit()},20)})}else if($.isFunction(i.onblur)){g.blur(function(e){i.onblur.apply(t,[g.val(),i])})}else{g.blur(function(t){})}y.submit(function(e){if(b){clearTimeout(b)}e.preventDefault();if(false!==c.apply(y,[i,t])){if(false!==s.apply(y,[i,t])){if($.isFunction(i.target)){var n;if(i.type==="checkBox"){var a=$(t).find(":checkbox:checked"),o=[];a.each(function(t,e){o[t]=e.value});n=o.join(";")}else{n=g.val()}var r=i.target.apply(t,[n,i]);$(t).html(r);t.editing=false;d.apply(t,[t.innerHTML,i]);if(!$.trim($(t).html())){$(t).html(i.placeholder)}}else{var l={};l[i.name]=g.val();l[i.id]=t.id;if($.isFunction(i.submitdata)){$.extend(l,i.submitdata.apply(t,[t.revert,i]))}else{$.extend(l,i.submitdata)}if("PUT"==i.method){l["_method"]="put"}$(t).html(i.indicator);var h={type:"POST",data:l,dataType:"html",url:i.target,success:function(e,n){if(h.dataType=="html"){$(t).html(e)}t.editing=false;d.apply(t,[e,i]);if(!$.trim($(t).html())){$(t).html(i.placeholder)}},error:function(e,n,s){f.apply(y,[i,t,e])}};$.extend(h,i.ajaxoptions);$.ajax(h)}}}$(t).attr("title",i.tooltip);return false})});this.reset=function(e){if(this.editing){if(false!==u.apply(e,[i,t])){$(t).html(t.revert);t.editing=false;if(!$.trim($(t).html())){$(t).html(i.placeholder)}if(i.tooltip){$(t).attr("title",i.tooltip)}}}}})};$.editable={types:{defaults:{element:function(t,e){var i=$('<input type="hidden" />');$(this).append(i);return i},content:function(t,e,i){$(":input:first",this).val(t)},reset:function(t,e){e.reset(this)},buttons:function(t,e){var i=this;if(t.submit){var n;if(t.submit.match(/>$/)){n=$(t.submit).click(function(){if(n.attr("type")!="submit"){i.submit()}})}else{n=$('<button type="submit" />');n.html(t.submit)}$(this).append(n)}if(t.cancel){var s;if(t.cancel.match(/>$/)){s=$(t.cancel)}else{s=$('<button type="cancel" />');s.html(t.cancel)}$(this).append(s);$(s).click(function(n){var s;if($.isFunction($.editable.types[t.type].reset)){s=$.editable.types[t.type].reset}else{s=$.editable.types["defaults"].reset}s.apply(i,[t,e]);return false})}}},text:{element:function(t,e){var i=$('<input type="text" />');if(t.width!="none"){i.width(t.width)}if(t.height!="none"){i.height(t.height)}i.attr("autocomplete","off");$(this).append(i);if(t.mask)i.mask(t.mask);else if(t.numberic){if(typeof t.numberic!=="string")t.numberic="9999";i.decimalMask(t.numberic)}return i}},textarea:{element:function(t,e){var i=$("<textarea />");if(t.rows){i.attr("rows",t.rows)}else if(t.height!="none"){i.height(t.height)}if(t.cols){i.attr("cols",t.cols)}else if(t.width!="none"){i.width(t.width)}$(this).append(i);return i}},select:{element:function(t,e){var i=$("<select />");$(this).append(i);return i},content:function(data,settings,original){if(String==data.constructor){eval("var json = "+data)}else{var json=data}for(var key in json){if(!json.hasOwnProperty(key)){continue}if("selected"==key){continue}var option=$("<option />").val(key).append(json[key]);$("select",this).append(option)}$("select",this).children().each(function(){var t=$(this),e=t.val();if(e===json["selected"]){t.prop("selected",true);return false}else{var i=t.text()||"",n=original.revert||"";if(i){if(n==i||n.indexOf(i)!=-1){t.prop("selected",true);return false}}}});if(!settings.submit){var form=this;$("select",this).change(function(){form.submit()})}}},checkBox:{element:function(t,e){var i=t.data;if(i){var n="",s,a="ckb_"+Math.random();for(var o in i){s=Math.random();n+='<input id="ckb_'+s+'" name="'+a+'" type="checkbox" value="'+o+'"><label for="ckb_'+s+'">'+i[o]+";</label><br>"}return $(n).appendTo(this)}else return null},content:function(t,e,i){var n=i.revert.split(";"),s=n.length,a=this.find(":checkbox");while(s--){this.find("[value='"+n[s]+"']").prop("checked",true)}}}},addInputType:function(t,e){$.editable.types[t]=e}};$.fn.editable.defaults={name:"value",id:"id",type:"text",width:"auto",height:"auto",event:"click.editable",onblur:"cancel",loadtype:"GET",loadtext:"Loading...",placeholder:"Click to edit",loaddata:{},submitdata:{},ajaxoptions:{}}})(jQuery);(function(t,e,i,n){var s=function(t,e){this.jq=t;this.data=e.data;if(!this.onInit)this.onInit=e.onInit;if(!this.onCreate)this.onCreate=e.onCreate};s.prototype={create:function(){if(typeof this.onInit==="function")this.onInit();if(typeof this.htmlMashup==="function")this.htmlMashup(true);this.createHandler(this.data);return this},createHandler:function(t){if(typeof this.onCreate==="function")this.onCreate(t);return this},toString:function(){return this.define}};i.register("DisplayObject",s);var a=function(t,e){this.jq=t;this.lazy=e.lazy;this.data=e.data;this.url=e.url;this.param=e.param;this.ajaxType=e.ajaxType||"GET";this.xhr=null;this.created=false;this.onAjaxStart=e.onAjaxStart;this.onAjaxEnd=e.onAjaxEnd;this.onInit=e.onInit;this.onCreate=e.onCreate;this.onUpdate=e.onUpdate;this.onError=e.onError};a.prototype={create:function(){if(this.data)this.bindData(this,true);else if(this.url){this.xhr=e.ajaxSettings.xhr();this.ajax(this.param,true)}return this},createHandler:function(t){this.created=true;if(typeof this.onCreate==="function")this.onCreate(t);return this},abort:function(){if(this.xhr&&(this.xhr.readyState!=4&&this.xhr.readyState!=0))this.xhr.abort();return this},update:function(t,i){var n;if(typeof i==="function")this.onUpdateOnce=i;if(this.url){if(typeof t==="function")this.onUpdateOnce=t;else{if(this.param)e.extend(this.param,t);else this.param=t}}else n=t||this.data;if(this.created){if(this.url)this.ajax(this.param,false);else this.bindData(n)}else{if(!this.url&&n)this.data=n;this.create()}return this},updateHandler:function(t,e){if(typeof this.onUpdate==="function")this.onUpdate(t,e)},ajax:function(t,i){var n=this;this.ajaxStartHandler(i);var s=this.xhr.readyState;if(s!==4&&s!==0)this.xhr.abort();e.ajax({url:this.url,dataType:"json",data:t,type:this.ajaxType,xhr:function(){return n.xhr},success:function(t,e,s){if(t.error)n.errorHandler(t.error);else{n.ajaxEndHandler(t,i);n.bindData(t,i)}}});return this},ajaxStartHandler:function(t){if(typeof this.onAjaxStart==="function")this.onAjaxStart(t)},ajaxEndHandler:function(t,e){if(typeof this.onAjaxEnd==="function")this.onAjaxEnd(t,e)},bindData:function(t,e){throw new Error(this.define+"的数据绑定函数未实现")},errorHandler:function(t){if(typeof this.onError==="function")this.onError(t);else if(this.url.handleError)this.url.handleError.call(this.url,t);else if(typeof i.onAjaxError==="function")i.onAjaxError.call(this,t)},toString:function(){return this.define}};i.register("AjaxDisplayObject",a);var o=function(t,i){var n=e.extend({},i);o.parent.call(this,t,n);this.data=n.data;this.template=n.template;this.items=null;this.selectedIndex=-1;this.prevIndex=-1;this.bindOptions=this.getBindOptions(i.bindOptions);this.onSelect=n.onSelect;this.onBind=n.onBind};o.prototype={bindData:function(t,i){this.json=t?t:[];if(e.isArray(t)){this.bindOptions.list=t;this.json={data:t}}else{this.bindOptions.list=t.data||[]}if(this.bindOptions.itemFilter)this.bindOptions.storeData=true;this.jq.bindList(this.bindOptions);if(this.bindOptions.itemFilter){this.data=this.jq.data("bound-array");this.jq.removeData("bound-array")}else this.data=this.bindOptions.list;this.bindHandler(t,i);if(i)this.createHandler(t);else this.updateHandler(t);if(typeof this.onUpdateOnce==="function"){this.onUpdateOnce(t,i);delete this.onUpdateOnce}return this},bindHandler:function(t,e){if(!e){this.selectedIndex=-1;this.prevIndex=-1}if(typeof this.onBind==="function")this.onBind(t,e)},getBindOptions:function(t){var i={template:this.template};return e.extend(i,t)},setSelectedIndex:function(t){var e={target:this.items.eq(t)[0]};this.selectHandler(e);return this},selectHandler:function(t){this.prevIndex=this.selectedIndex;this.selectedIndex=this.items.index(t.target);if(typeof this.onSelect==="function")this.onSelect(t)},getPureData:function(t){if(t&&!(t instanceof Array))return null;var e=i.deepClone(t||this.data);for(var n=0,s=e.length;n<s;n++){var a=e[n],o;for(o in a){if(o.indexOf(":")>-1)delete a[o]}}return e},getSelectedData:function(t){var e=this.data[this.selectedIndex];if(!t){var i={},n;for(n in e)if(n.indexOf(":")===-1||n===":index"||n===":rowNum")i[n]=e[n];return i}else return e},getPrevData:function(t){var e=this.data[this.prevIndex];if(!t){var i={},n;for(n in e)if(n.indexOf(":")===-1||n===":index"||n===":rowNum")i[n]=e[n];return i}else return e},getSelectedItem:function(){return this.items[this.selectedIndex]},getPrevItem:function(){return this.items[this.prevIndex]},empty:function(){this.jq.html("");return this},clearAll:function(){this.data=null;return this.empty()}};i.register("ListBase",o,"AjaxDisplayObject")})(window,jQuery,fy);(function(t,e,i,n){var s=e("body"),a={zIndex:29999,instances:{},remove:function(t){delete this.instances[t]},closeAll:function(){for(var t in this.instances){var e=this.instances[t];if(e.status==="open")e.close()}}};s.bind("scroll.dropDownHideAll",function(){a.closeAll()});var o=function(t,i){var n=e.extend({eventType:"mousedown",allowBlank:false},i),r=this;o.parent.call(this,t,n);this.text=n.text||"";this.target=e(n.target);if(i.width)this.target.width(i.width);if(i.height)this.target.css("maxHeight",i.height);this.status="close";this.event=n.eventType+".fyDropdown";this.bodyBinder=function(){s.bind("mousedown.dropDownHideAll",function(){a.closeAll()})};this.onBeforeOpen=n.onBeforeOpen;this.onOpen=n.onOpen;this.onClose=n.onClose;if(n.allowBlank){this.wrapper=this.jq.css({float:"left",margin:0}).wrap('<span style="display: inline-block;vertical-align: middle;"></span>').parents("span:first");var l=e('<div style="font:Arial 12px;color:#d00;float:left;margin:5px 0 0 -26px ;width:8px;line-height:12px;cursor:pointer;display:none;">x</div>').appendTo(this.wrapper).click(function(){if(!r.jq.prop("disabled"))r.jq.val("")});this.wrapper.hover(function(){l.toggle()})}if(!this.lazy)this.create()};o.prototype={position:function(){var t=this.jq,i=this.target,n=t.offset();var s=n.top+t.outerHeight(),o=i.outerHeight();if(s+o>e(document).outerHeight()&&n.top>o){s=n.top-i.outerHeight()}i.css({top:s,left:n.left,zIndex:a["zIndex"]++})},create:function(t){if(typeof this.onInit==="function")this.onInit();if(this.jq[0].tagName==="INPUT")this.jq.addClass("combo-input").val(this.text);else this.jq.text(this.text);this.target.css({display:"none",position:"absolute"}).mousedown(function(t){t.stopPropagation()});this.enable();this.instanceId=i.uuid();a.instances[this.instanceId]=this;this.createHandler(t);return this},enable:function(){var t=this,e=this.jq,i=this.target;e.bind(this.event,function(e){var n=true;t.status==="close"&&t.position();if(typeof t.onBeforeOpen==="function"){n=t.onBeforeOpen.apply(t);if(n===false)return t}i.stop(true,true).slideToggle(90,function(){if(i.css("display")==="block")t.openHandler();else t.closeHandler()});return t});return this},disable:function(){this.jq.prop("disabled",true);this.target.hide();this.jq.unbind(this.event);return this},open:function(){if(typeof this.onBeforeOpen==="function"){var t=this.onBeforeOpen();if(t===false)return this}this.position();this.target.stop(true,true).slideDown(90);this.openHandler();return this},openHandler:function(){this.status="open";this.bodyBinder();this.target.bind("mouseleave.dropDownHide",this.bodyBinder).bind("mouseenter.dropDownHide",function(){s.unbind("click.dropDownHide")});if(typeof this.onOpen==="function")this.onOpen.apply(this,arguments)},close:function(){this.target.stop(true,true).slideUp(90);this.closeHandler();return this},closeHandler:function(){this.status="close";s.unbind(".dropDownHide");this.target.unbind(".dropDownHide");if(typeof this.onClose==="function")this.onClose.apply(this,arguments)},getText:function(){return e.trim(this.jq.val())}};i.register("ComboBase",o,"DisplayObject")})(window,jQuery,fy);(function(t,e,n,s){var a,o;function r(t){var e,i;if(t.getMonth()<8)e=new Date(t.getFullYear()-1,8,1);else e=new Date(t.getFullYear(),8,1);if(e.getDay()==0)i=new Date(e.getFullYear(),8,2);else if(e.getDay()==6)i=new Date(e.getFullYear(),8,3);else i=e;return i}var l=function(i,s){if(!(a&&o)){if(t.sys&&t.sys.sysInfo){a=new Date(sys.sysInfo.date);o=n.parseDate(sys.sysInfo.schoolOpen)}else{var d=new Date;a=new Date(d.getFullYear(),d.getMonth(),d.getDate());o=r(a)}}var h=e.extend({today:a,schoolOpen:o,selectedDate:a,showToday:false,showWeekNum:true,sundayIsWeekend:true,dayNames:["日","一","二","三","四","五","六"],monthNames:null,symbols:["年","月","周次"]},s);l.parent.call(this,i,h);this.sundayIsWeekend=h.sundayIsWeekend;this.showToday=h.showToday;this.onChoose=h.onChoose;this.onChooseWeek=h.onChooseWeek;this.onCalendarEnter=h.onCalendarEnter;this.onChange=h.onChange;this.today=typeof h.today==="string"?n.parseDate(h.today):h.today;this.schoolOpen=typeof h.schoolOpen==="string"?n.parseDate(h.schoolOpen):h.schoolOpen;this.begin=null;this.showWeekNum=!!h.showWeekNum;if(s.selectedDate)this.selectedDate=typeof h.selectedDate==="string"?n.parseDate(h.selectedDate):h.selectedDate;else this.selectedDate=this.today;this.monthNames=h.monthNames||["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"];this.symbols=h.symbols;this.showState=0;this.lastDrawn={};this.create(h)};l.prototype={goto:function(t,e,i){t=parseInt(t,10);e=parseInt(e,10);if(i){this.setSelectedDate(t+"-"+e+"-"+i)}else{this.selectedYear=t;this.selectedMonth=e;this.drawMonthly(t,e)}return this},drawMonthly:function(t,e,i){this.toggler.text(t+this.symbols[0]+e+this.symbols[1]);if(this.lastDrawn.year!=t||this.lastDrawn.month!=e){this.lastDrawn.year=t;this.lastDrawn.month=e;this.rewriteDayTds(t,e);if(typeof this.onChange==="function")this.onChange.call(this,this.dateTds,i||"enter")}else if(typeof this.onCalendarEnter==="function"){this.onCalendarEnter.call(this,this.dateTds,i||"enter")}return this},mkDateArr:function(t,e){var i=[],s=0,a=new Date(t,e,0).getDate(),o=new Date(t,e-1,1).getDay();if(this.sundayIsWeekend){o--;if(o<0)o=6}for(;s<a;s++){if(this.begin&&parseInt(""+t+n.padLeft(e)+n.padLeft(s+1),10)<this.begin){i[s+o]=""}else{i[s+o]=s+1}}s=42;while(s--){if(!i[s])i[s]="&nbsp;"}return i},create:function(t){if(typeof this.onInit==="function")this.onInit();var s='<td class="TdOut"></td>',a=t.showWeekNum?'<td class="TdWeek"></td>':"",o=t.showWeekNum?8:7,r="",l=t.showWeekNum?"<td class=TdWeek>"+t.symbols[2]+"</td>":"";for(i=0;i<7;i++)a+=s;var d="<tr>"+a+"</tr>";for(i=0;i<6;i++)r+=d;var h='<table class="tbCalendarHeader"><tr><td class="signal jmpPrev">«</td>'+'<td class="tdCalendarHeader"></td>'+'<td class="signal jmpNext">»</td></tr></table>';var c=e(h).appendTo(this.jq);this.toggler=c.find(".tdCalendarHeader");c[0].onselectstart=n.PREVENT_FN;var u='<table class="TbDateChooser"><thead style="height:24px;"><tr class="trDayName"></tr></thead>'+'<tbody class="tbdDate">'+r+"</tbody></table>";this.calendar=e(u).appendTo(this.jq).css({height:this.jq.height()-c.height()});this.tds=this.calendar.find("td.TdOut");this.weekTds=this.calendar.find("td.TdWeek");this.ymTable=e('<table class="ymTable"><tr><td class="yearTd"></td></tr></table>').appendTo(this.jq).css("height",this.calendar.height());this.selector=this.ymTable.find(".yearTd");this.goto(this.selectedDate.getFullYear(),this.selectedDate.getMonth()+1);if(this.sundayIsWeekend)t.dayNames.push(t.dayNames.shift());this.calendar.find(".trDayName").html(l+"</td><td class=TrOut>"+t.dayNames.join("</td><td class=TrOut>")+"</td>");var f=this;this.toggler.click(function(){f.showState=++f.showState%3;f.toggleView(f.showState)});this.selector.delegate("td","click",function(t){f.showState=--f.showState%3;f.toggleView(f.showState,e.text(this))});this.toggler.siblings(".jmpPrev").click(function(){f.jumpPrev(f.showState)});this.toggler.siblings(".jmpNext").click(function(){f.jumpNext(f.showState)});var p=this.calendar.find(".tbdDate");p.delegate("td.TdOut","click",function(t){var i=e(this).data("date");if(i&&e.trim(i)){f.chooseHandler(new Date(f.selectedYear,f.selectedMonth-1,parseInt(i,10)),t.currentTarget)}}).find("tr").css("height",(this.calendar.height()-24)/6);if(this.showWeekNum&&typeof this.onChooseWeek==="function"){p.delegate(".TdWeek","click",function(t){f.onChooseWeek(parseInt(e.text(t.currentTarget,10)))})}this.createHandler(this.selectedDate);return this},toggleView:function(t,i){if(t){switch(t){case 3:{break}case 2:{var n=Math.floor((i||this.selectedYear)*.1)*10;this.toggler.text(n+" - "+(n+10)+this.symbols[0]);var s=0,a=[];for(;s<11;s++){a[s]="";var o=n===this.selectedYear?' class="current"':"";if(!(s%4))a[s]+="<tr>";a[s]+="<td"+o+">"+n+++"</td>";if(s%4===3)a[s]+="</tr>"}this.selector.html("<table>"+a.join("")+"</table>");break}case 1:{if(i)this.selectedYear=parseInt(i,10);this.toggler.text(this.selectedYear+this.symbols[0]);var r=this.monthNames,s=0,a=[];for(;s<12;s++){a[s]="";var o=s+1===this.selectedMonth?' class="current"':"";if(!(s%4))a[s]+="<tr>";a[s]+="<td"+o+">"+r[s]+"</td>";if(s%4===3)a[s]+="</tr>"}this.selector.html("<table>"+a.join("")+"</table>");this.calendar.hide();this.ymTable.show();break}}}else{if(i)this.selectedMonth=e.inArray(i,this.monthNames)+1;this.drawMonthly(this.selectedYear,this.selectedMonth);this.ymTable.hide();this.calendar.show()}},chooseHandler:function(t,i){this.selectedDate=t;this.tds.filter(".selectedDate").removeClass("selectedDate");this.selectedTD=e(i).addClass("selectedDate");if(typeof this.onChoose==="function")this.onChoose(t,this.selectedTD)},rewriteDayTds:function(t,i){var n=this.mkDateArr(t,i),s,a,o=this,r;this.tds.removeClass("today").removeClass("selectedDate").each(function(t,i){a=n[t];r=e(i).removeAttr("style").unbind().removeData();if(!isNaN(a)){s=new Date(o.selectedYear,o.selectedMonth-1,parseInt(a,10));if(o.showToday&&s.getTime()==o.today.getTime()){r.addClass("today")}if(s.getTime()==o.selectedDate.getTime()){r.addClass("selectedDate")}r.html(a).data("date",parseInt(a,10))}else{r.html(a)}});if(this.showWeekNum)this.rewriteWeek(t,i);this.dateTds=[];for(var l=0;l<n.length;l++){if(n[l]!=="&nbsp;")this.dateTds.push(this.tds[l])}this.dateTds=e(this.dateTds);if(typeof this.onCalendarEnter==="function"){this.onCalendarEnter(this.dateTds)}return this},rewriteWeek:function(t,i){var s=new Date(t,i-1,1);var a=n.weekSpan(s,this.schoolOpen);if(!this.sundayIsWeekend&&s.getDay()===0)a++;this.weekTds.each(function(){e(this).text(a++)});return this},jumpPrev:function(t){switch(t){case 0:{this.selectedMonth=this.selectedMonth-1;if(this.selectedMonth==0){--this.selectedYear;this.selectedMonth=12}this.drawMonthly(this.selectedYear,this.selectedMonth,"prev");break}case 1:{this.toggler.text(--this.selectedYear+this.symbols[0]);break}case 2:{this.toggleView(2,parseInt(this.selector.find("td:first").text(),10)-10);break}}},jumpNext:function(t){switch(t){case 0:{this.selectedMonth=this.selectedMonth+1;if(this.selectedMonth==13){++this.selectedYear;this.selectedMonth=1}this.drawMonthly(this.selectedYear,this.selectedMonth,"next");break}case 1:{this.toggler.text(++this.selectedYear+this.symbols[0]);break}case 2:{this.toggleView(2,parseInt(this.selector.find("td:first").text(),10)+10);break}}},getSelectedDate:function(){return this.selectedDate.getDate()},setSelectedDate:function(t){this.selectedDate=typeof t==="string"?n.parseDate(t):t;this.goto(this.selectedDate.getFullYear(),this.selectedDate.getMonth()+1);return this},select:function(t){this.setSelectedDate(t);this.getTDByDate(t).trigger("click");return this},getDateByTd:function(t){var e=[];var i=this.selectedYear,n=this.selectedMonth;t.each(function(s,a){var o=t.eq(s).data("date");if(o){e.push(new Date(i,n,o))}});return e},getTDByWeekNum:function(t){var i,n=[];this.weekTds.each(function(n,s){if(e.text(s)==t){i=e(s);return false}});if(i&&i.length){var s=i.parent("tr").find(".TdOut");s.each(function(t,i){if(e(i).data("date"))n.push(i)})}return e(n)},getTDWeekNum:function(t){var e="不在当前月中";if(this.showWeekNum){var i=t?this.getTDByDate(t):this.selectedTD;if(i.length){e=i.parent().find(".TdWeek").text()}}else e="未设定显示周次";return e},getTDByDay:function(t){var i=t;if(this.showWeekNum)t++;if(this.sundayIsWeekend){t=i?--t:t+6}var n=[];this.getTDmonthly().each(function(e,i){if(i.cellIndex===t){n.push(i)}});return e(n)},getTDByDate:function(t){var i=this.dateTds,s=typeof t==="string"?n.parseDate(t):t,a=this.selectedMonth,o=this.selectedYear;if(o===s.getFullYear()&&a===s.getMonth()+1){var r=i.length,l=s.getDate();while(r--){if(i.eq(r).data("date")===l)break}return i.eq(r)}else return e(" ")},getTDweekly:function(t){var i=this.getTDByDate(t);if(i.length){var n=i.parent().find("td.TdOut");return n.not(function(t){return n.eq(t).html()==="&nbsp;"})}else return e(" ")},getTDmonthly:function(t){var i=typeof t==="string"?n.parseDate(t):t,s=this.selectedMonth,a=this.selectedYear;if(!t||a===i.getFullYear()&&s===i.getMonth()+1)return this.dateTds;else return e(" ")},getTDByDateMonthly:function(t){var e=parseInt(t,10)||1;return this.dateTds.eq(--e)},getTDByDateYearly:function(t,i){var n=parseInt(t,10)||0,s=parseInt(i,10)||1;if(this.selectedMonth===n){return this.getTDByDate(new Date(this.selectedYear,n-1,s))}else return e(" ")},getFirstDateOfMonth:function(t,e){var i=t||this.selectedYear,n=e||this.selectedMonth;return new Date(i,n-1,1)},getLastDateOfMonth:function(t,e){var i=t||this.selectedYear,n=e||this.selectedMonth;return new Date(i,n,0)},getTDBetween:function(t,i){var s=t instanceof Date?t:n.parseDate(t);var a=i instanceof Date?i:n.parseDate(i);var o=this.getFirstDateOfMonth(),r=this.getLastDateOfMonth();var l=[];if(o>=s&&o<=a||r>=s&&r<=a){var d=this;this.dateTds.each(function(t,i){var n=new Date(d.selectedYear,d.selectedMonth-1,e(i).data("date"));if(n>=s&&n<=a)l.push(i)})}return e(l)}};n.register("dateChooser",l,"DisplayObject")})(window,jQuery,fy);(function(t,e,i,n){var s=function(t,a){var o=e.extend({format:"yyyy-MM-dd",allowBlank:true},a),r=this;this.format=o.format;this.onChoose=o.onChoose;this.jq=t.addClass("dateField-input").prop("readonly",true);var l=e.extend({},o);delete l.onInit;delete l.onCreate;l.onChoose=function(t,e){r._syncData();if(typeof r.onChoose==="function")r.onChoose(r.text,t,e);r.close()};this.dateChooser=i(e('<div class="combo-dropDown dateField-combo"/>').appendTo("body")).dateChooser(l);this._syncData();o.target=this.dateChooser.jq;if(o.text===n)o.text=this.text;s.parent.call(this,t,o)};s.prototype={_syncData:function(){this.selectedDate=this.dateChooser.selectedDate;this.text=this.selectedDate?i.formatDate(this.selectedDate,this.format):"";this.jq.val(this.text)},setSelectedDate:function(t){this.dateChooser.setSelectedDate(t);this._syncData();return this},goto:function(t,e,i){this.dateChooser.goto(t,e,i);if(i)this._syncData();return this},select:function(t){this.dateChooser.select(t);return this}};i.register("dateField",s,"ComboBase")})(window,jQuery,fy);(function(t,e,i,n){function s(t){var i=e.trim(this.jq.val());if(i){var n=this.list,s=[];for(var a=0,o=this.data.length;a<o;a++){var r=this.data[a];if(r[t.textSrc].indexOf(i)!==-1){s.push(r);if(s.length===t.maxEntries)break}}if(s.length){n.bindData({data:s});this.open();n.items.each(function(t,n){var s=e(n);s.html(s.text().replace(i,'<span class="fBlue fBold">'+i+"</span>"))})}else{this.list.bindData({data:[]});this.close()}}else{this.list.bindData({data:[]});this.close()}}var a=function(t,n){var o=e.extend({enabled:true,textSrc:"text",maxEntries:5,selectedClass:"autoComplete-hi"},n),r=this;this.enabled=o.enabled;this.presist=false;this.list=i('<ul class="combo-dropDown autoComplete"><li class="fLightGray">loading...</li></ul>').list(o);this.list.onSelect=function(t,i){var n=this.getSelectedItem();r.jq.val(e.text(n));if(!i)r.close()};this.list.onCreate=function(t){r.data=t.data;this.bindData({data:[]});this.jq.css({width:r.jq.width()}).mouseenter(function(){r.presist=true}).mouseleave(function(){r.presist=false});r.jq.bind("keyup.fyDropdown",function(t){if(!r.enabled)return;var i=e.trim(r.jq.val());var n=t.keyCode,a=r.list;if(n===38||n===40){if(a.selectedIndex===-1){a.setSelectedIndex(0)}else{var l=a.selectedIndex;if(n===38){if(l===0)l=a.items.length-1;else l--}else{if(l===a.items.length-1)l=0;else l++}a.setSelectedIndex(l)}}else if(n===13){r.close()}else{s.call(r,o)}return false}).bind("blur.fyDropdown",function(){if(!r.presist)r.close()})};o.target=this.list.jq.appendTo("body");o.onBeforeOpen=function(){if(!e.trim(r.jq.val())||!r.list.data.length)return false};a.parent.call(this,t,o);this.position()};a.prototype={enable:function(){this.enabled=true},disable:function(){this.enabled=false}};i.register("autoComplete",a,"ComboBase")})(window,jQuery,fy);(function(t,e,i,n){var s=function(t,i){var n,a=e.extend({bindOptions:{},textSrc:"text",selectedIndex:0,autoHeight:false,eventType:"click"},i);if(i.renderer){n=":=render";a.bindOptions.itemRender={render:i.renderer}}else n="";var o=a.iconSrc?'<img src="{'+a.iconSrc+'}" class="accIco" align="absmiddle" />':"";a.bindOptions.template=a.template||'<li><div class="accHead">'+o+"{"+a.textSrc+n+'}</div><div class="accBox"></div></li>';s.parent.call(this,t,a);if(this.jq[0].tagName.toLowerCase()!=="ul")this.jq=e('<ul class="accUL"></ul>').appendTo(this.jq);this.selectedIndex=a.selectedIndex;this.selectedClass=a.selectedClass;this.autoHeight=!!a.autoHeight;this.boxHeight=0;this.eventType=a.eventType;this.stacks=t.children("li");this.onSelect=a.onSelect;if(!this.lazy)this.create(a)};s.prototype={adjustHeight:function(){this.boxHeight=this.jq.innerHeight()-this.stacks.find(".accHead").eq(0).outerHeight()*this.stacks.length;this.jq.find(".accBox").outerHeight(this.boxHeight)},createHandler:function(i){var n=this;this.stacks=this.jq.children("li");this.boxHeight=this.jq.innerHeight()-this.stacks.find(".accHead").eq(0).outerHeight()*this.stacks.length;if(this.autoHeight){this.jq.find(".accBox").css("height",this.boxHeight);var s=0;e(t).resize(function(){if(s)clearTimeout(s);s=setTimeout(function(){n.adjustHeight()},50)})}this.jq.delegate(".accHead",this.eventType,function(t){t.stopImmediatePropagation();var i=e(t.currentTarget),s=i.parent(),a=n.stacks.index(s);if(a===n.selectedIndex&&n.prevIndex!=-1)return;n.prevIndex=n.selectedIndex;n.selectedIndex=a;n.stacks.eq(n.prevIndex).children(".accBox.current").removeClass("current").slideUp(100);n.stacks.eq(a).children(".accBox").addClass("current").slideDown(100);if(n.selectedClass){n.stacks.find("."+n.selectedClass).removeClass(n.selectedClass);e(t.currentTarget).addClass(n.selectedClass)}if(typeof n.onSelect==="function")n.onSelect(t)});if(typeof this.onCreate==="function")this.onCreate(i);this.openBox(this.selectedIndex);return this},openBox:function(t){this.jq.find(".accHead").eq(t).trigger(this.eventType)},getBox:function(t){return this.stacks.eq(t).find(".accBox")},getBar:function(t){return this.stacks.eq(t).children(".accHead")}};i.register("accordion",s,"ListBase")})(window,jQuery,fy);(function(t,e,i,n){var s=function(t,i){var n={arrow:true,arrowColor:"",once:false,trigger:"auto",fixedWidth:0,offsetX:0,offsetY:0,position:"top-left",tooltipTheme:".tooltip-message"},a=e.extend(n,i);s.parent.call(this,t,a);this.tipText=a.text||this.jq.attr("title")||"";this.sets=a;this.$tip=null;this.tooltip_width=this.tooltip_height=0;this.create(a)};s.prototype={create:function(){if(typeof this.onInit==="function")this.onInit();var i=this,n=this.jq,s=this.sets;var a=i.tipText;var o=s.fixedWidth>0?' style="width:'+s.fixedWidth+'px;"':"";i.$tip=e('<div class="'+s.tooltipTheme.replace(".","")+'"'+o+'><div class="tooltip-message-content">'+a+"</div></div>").hide().appendTo("body");n.data("$tip",i.$tip);n.data("sets",s);var r=e(t).width();var l=n.outerWidth(false);var d=n.outerHeight(false);var h=this.tooltip_width=i.$tip.outerWidth(false);var c=this.tooltip_height=i.$tip.outerHeight(false);var u=n.offset();if(!s.fixedWidth){i.$tip.css({width:h+"px",paddingLeft:0,paddingRight:0})}function f(){var n=e(t).scrollLeft();if(y-n<0){var s=y-n;y=n;i.$tip.data("arrow-reposition",s)}if(y+h-n>r){var s=y-(r+n-h);y=r+n-h;i.$tip.data("arrow-reposition",s)}}switch(s.position){case"top":{var p=u.left+h-(u.left+n.outerWidth(false));var y=u.left+s.offsetX-p/2;var g=u.top-c-s.offsetY-10;f();if(u.top-c-s.offsetY-11<0){g=0}break}case"top-left":{var y=u.left+s.offsetX;var g=u.top-c-s.offsetY-10;f();break}case"top-right":{var y=u.left+l+s.offsetX-h;var g=u.top-c-s.offsetY-10;f();break}case"bottom":{var p=u.left+h+s.offsetX-(u.left+n.outerWidth(false));var y=u.left-p/2;var g=u.top+d+s.offsetY+10;f();break}case"bottom-left":{var y=u.left+s.offsetX;var g=u.top+d+s.offsetY+10;f();break}case"bottom-right":{var y=u.left+l+s.offsetX-h;var g=u.top+d+s.offsetY+10;f();break}case"left":{var y=u.left-s.offsetX-h-10;var m=u.left+s.offsetX+l+10;var b=u.top+c+s.offsetY-(u.top+n.outerHeight(false));var g=u.top-b/2;if(y<0&&m+h>r){y=y+h}if(y<0){var y=u.left+s.offsetX+l+10;i.$tip.data("arrow-reposition","left")}break}case"right":{var y=u.left+s.offsetX+l+10;var m=u.left-s.offsetX-h-10;var b=u.top+c+s.offsetY-(u.top+n.outerHeight(false));var g=u.top-b/2;if(y+h>r&&m<0){y=r-h}if(y+h>r){y=u.left-s.offsetX-h-10;i.$tip.data("arrow-reposition","right")}break}default:{}}if(s.arrow==true){var v="tooltip-arrow-"+s.position,x=i.$tip.css("backgroundColor"),w="◆",C="";if(v=="tooltip-arrow-right"){C="top:"+(c/2-6)+"px"}else if(v=="tooltip-arrow-left"){C="top:"+(c/2-6)+"px"}if(v.search("top")>0){C="top: "+(c-8)+"px"}if(v.search("bottom")>0){C="top: -6px"}var k='<div class="'+v+' tooltip-arrow" style="color:'+x+"; width:"+h+"px; "+C+'">'+w+"</div>";i.$tip.css({top:g+"px",left:y+"px"}).append(k)}if(s.trigger==="auto"){n.bind("mouseenter.fy",function(){i.show()}).bind("mouseleave.fy blur.fy",s.once?function(){i.dispose()}:function(){i.hide()})}this.createHandler();return this},dispose:function(){var t=this.jq,e=this.$tip;e.stop(true,true).fadeOut(200,function(){t.removeData().unbind(".fy");e.removeData().remove()});return this},show:function(){this.$tip.stop(true,true).fadeIn(200);return this},hide:function(){this.$tip.stop(true,true).fadeOut(200);return this}};i.register("toolTip",s,"DisplayObject")})(window,jQuery,fy);(function(t,e,i,n){var s=0;var a=function(t,i){var n=this;var o=e.extend({},i);a.parent.call(this,t,o);this.cmds={};var r="fyMenu"+s++;var l=e('<ul id="'+r+'" class="contextMenu"></ul>');var d=o.menu;for(var h in d){l.append('<li><a href="#'+h+'">'+d[h].txt+"</a></li>");this.cmds[h]=d[h].cmd}e("body").append(l);this.jq=l;o.menu=r;t.contextMenu(o,function(t,e,i){n.cmds[t](e,i)})};a.prototype={disable:function(t){this.jq.disableContextMenuItems(t)},enable:function(t){this.jq.enableContextMenuItems(t)}};i.register("contextMenu",a,"DisplayObject")})(window,jQuery,fy);(function(t,e,i,n){var s=0;var a=function(t,n){var s=this,o=e.extend({template:this.makeTemplate(n)},n);a.parent.call(this,t,o);this.columns=o.columns;if(this.jq[0].tagName.toLowerCase()!=="table")this.jq=e('<table id="'+t[0].id+'_table" class="fui-datagrid"></table>').appendTo(this.jq);else{this.jq.addClass("fui-datagrid");if(i.browser.webkit){var r=e("<br>");this.jq.replaceWith(r);r.replaceWith(this.jq)}}this.table=this.jq;this.makeTHeader(o);this.thead=this.jq.find("tr.fyGridHeadCols");this.tfoot=this.jq.find("tfoot td").eq(0);this.tbody=this.jq=this.jq.find("tbody");if(this.group)this.tbody.addClass("groupedTbody");this.titleBars=o.titleRowNum||1;if(o.header)this.titleBars++;if(o.toolBar)this.titleBars++;this.sortInLocal=!!o.sortInLocal;if(o.selectedClass)this.selectedClass=o.selectedClass;this.keyboardEdit=o.keyboardEdit;if(o.hideHeader)this.thead.hide();var l=o.selectEvent||"click";this.tbody.delegate("td",l,function(t){s.selectHandler(t,e(t.currentTarget).parents("tr")[0].rowIndex-s.titleBars)});if(n.onRowDblClick){this.tbody.delegate("tr","dblclick",function(){n.onRowDblClick(s.selectedIndex,s.getSelectedData())})}this.pagination=o.pagination;this.param=o.param;if(!this.lazy)this.create()};a.prototype={create:function(){if(typeof this.onInit==="function")this.onInit();if(typeof this.htmlMashup==="function")this.htmlMashup(true);if(this.data){this.sortInLocal=true;this.bindData({data:this.data},true)}else if(this.url){var t=this;if(this.pagination){var i={link_to:"javascript:void(0)",num_edge_entries:1,num_display_entries:5,items_per_page:10,prev_text:"上页",next_text:"下页",load_first_page:false,gotoPage:false,callback:function(e,i){t.pageIndex=t.param.pageIndex=e;t.update();return false}};this.pagination=e.extend(i,this.pagination);this.pageCount=this.pageIndex=this.rowCount=0;this.pageSize=this.pagination.items_per_page;this.param=e.extend({pageIndex:this.pageIndex,pageSize:this.pageSize},this.param);this.tPager=e('<div class="pagination_container"></div>').appendTo(this.tfoot);if(this.pagination.showCount){if(typeof this.pagination.showCount==="string")this.showCountTmpl=this.pagination.showCount;else this.showCountTmpl="总记录数: {rowCount} , 第{pageNum} / {pageCount}页";this.pageCounter=e("<span></span>");this.tPager.after(this.pageCounter)}if(this.pagination.customizable){if(!this.pagination.customizable.push)this.pagination.customizable=[10,20,50];var n=this.pagination.customizable,s=[];for(var a=0,o=n.length;a<o;a++)s[a]='<option value="'+n[a]+'" '+(n[a]==this.pageSize?"selected":"")+">"+n[a]+"</option>";this.pageSelector=e('<select class="gridPageSelect">'+s.join("")+"</select>");this.tfoot.prepend(this.pageSelector);this.pageSelector.bind("change",function(){t.pageSize=t.param.pageSize=parseInt(this.options[this.selectedIndex].value,10);t.pageIndex=t.param.pageIndex=0;t.update();return false})}}this.xhr=e.ajaxSettings.xhr();this.ajax(this.param,true)}return this},bindHandler:function(t,e){this.items=this.tbody.find("tr");if(this.group)this.mkGroup(this.group,t,e);if(typeof this.onBind==="function")this.onBind(t,e)},createHandler:function(t){this.created=true;this.paginate(t,true);if(this.columns){this.sortColumn(t,true);this.configEditable(t,true)}if(typeof this.onCreate==="function"){this.onCreate(t);if(this.keyboardEdit)o(this)}},mkGroup:function(t,e,i){for(var n=0,s=t.length;n<s;n++){var a=t[n],o=null,r=1,l=null;var d=this.cols(a);for(var h=0,c=d.length;h<c;h++){var u=d.eq(h),f=u.html();if(f!==o){o=f;r=1;l=u}else{r++;u.remove();l.attr("rowspan",r)}}}},paginate:function(t,n){if(this.pagination){this.pageInfo=t.page||this.pageInfo;this.pageInfo.pageNum=this.pageInfo.pageIndex+1;this.rowCount=this.pageInfo.rowCount;this.pageIndex=this.pagination.current_page=this.pageInfo.pageIndex;this.pageCount=this.pageInfo.pageCount;this.pageSize=this.pagination.items_per_page=this.pageInfo.pageSize;this.tPager.pagination(this.rowCount,this.pagination);if(this.pagination.showCount){this.pageCounter.html(i.formatJSON(this.showCountTmpl,this.pageInfo))}if(this.pagination.gotoPage){var s=this;this.gotoPageElem=e('<span><input type="number" value="'+(this.param.pageIndex+1)+'" step="1" min="1" max="'+this.pageCount+'" style="width: 50px;" class="gotoNumber"><a href="javascript:void(0)" class="gotoBtn">GO</a></span>');this.tPager.find(".pagination").prepend(this.gotoPageElem);this.gotoPageElem.off("click",".gotoBtn").on("click",".gotoBtn",function(){var t=parseInt(s.gotoPageElem.find(".gotoNumber").val(),10)-1;s.pageIndex=s.param.pageIndex=t;s.update();return false})}}},updateHandler:function(t,e){e=!!e;this.paginate(t,e);if(this.columns)this.configEditable(t,e);if(typeof this.onUpdate==="function")this.onUpdate(t,e);if(typeof this.onUpdateOnce==="function"){this.onUpdateOnce(t,e);delete this.onUpdateOnce}},configEditable:function(t,i){var n=this,s=function(t,i){var a=e(this),o=t,r=n.data[a.parent("tr")[0].rowIndex-n.titleBars],l=n.columns[this.cellIndex].src,d=a.data("oval")||r[l],h=a.data("oldHTML");if(t!=d){var c=n.columns[this.cellIndex].renderer;if(c)o=c(t,this.cellIndex,r,l);r[l]=t;r[":modified by user"]=true;if(a.data("linkRow")){var u=a.siblings("td");u.each(function(t,e){var i=u.eq(t);var s=n.columns[e.cellIndex].renderer;if(s&&!e.editing){var a=s(r[n.columns[e.cellIndex].src],e.cellIndex,r,l);i.html(a).data({oldHTML:a})}})}a.data("oval",t).data({oldHTML:o}).addClass("tableEditedCell");if(i.type==="select"){i.data.selected=t;a.editable("destroy");a.editable(s,i)}else if(i.type==="checkBox"){}if(i.onEdited){var f={};f[l]=t;i.onEdited.call(n,a,f,r,l)}}else{o=h}return o};var a=l=this.columns.length;while(a--){var o=this.columns[a];if(o.editable){var r=this.cols(a);r.each(function(t,i){var a=e(i),r={onblur:"submit",width:"none",height:"none",placeholder:""};if(o.editable.submit)r.onblur="ignore";var l=e.extend(r,o.editable);if(l.type==="select"){if(l.data.reverse){var d=l.data,h=d.length,c={};while(h--)c[d[h][l.value]]=d[h][l.text];l.data=c}l.data=e.extend({selected:a.data("oval")},l.data)}a.bind("click.fy",function(t){n.selectHandler(t,i.parentElement.rowIndex-n.titleBars)}).data({oldHTML:a.html()}).addClass("editableTD").editable(s,l);if(o.editable.linkRow){a.data("linkRow",true)}})}switch(o.cmd){case"checkAll":{if(i){this.cmdCheckAll=this.thead.find("th").eq(a).find("input");this.cmdCheckAll.syncCheckBoxGroup("td.cellIndex_0>:checkbox:enabled",this.tbody)}this.cmdCheckAll.prop("checked",false);break}case"checkOne":{if(i){this.cmdCheckOne=this.thead.find("th").eq(a).find("input:hidden")}break}default:}}},makeTHeader:function(t){var i=0,n=t.columns?t.columns.length:0,s=[],a=[];for(;i<n;i++){var o=false,r=t.columns[i];if(r.cmd){o=true;r.width="30";if(r.cmd==="checkAll")r.text='<label><input type="checkbox" name="'+r.src+'" value="chk_'+i+'"> '+(r.text||"")+"</label>";else r.text='<input type="hidden" name="'+r.src+'" value="chk_'+i+'">'}r.text=r.text.toString();a[i]='<th data-osrc="'+(typeof r.sortable==="string"?r.sortable:r.src)+'" style="'+(o?' text-overflow:clip;"':"")+"min-width:"+(r.minWidth||16)+'px;" title="'+(r.cmd?"":r.text.replace(/<\/?[^>]*>/g,"")||"column_"+i)+'">'+(r.text||"column_"+i)+"</th>";s[i]="width:"+(r.width?r.width+"px;":"auto; ")}var l=t.header?'<tr class="fyGridHeadText"><th colspan="'+(n||"1")+'">'+t.header+"</th></tr>":"";var d=t.toolBar?'<tr class="fyGridHeadBar"><th class="fyToolBar" colspan="'+n+'" ></th></tr>':"";var h='<colgroup><col style="'+s.join('"><col style="')+'"></colgroup><thead>'+l+d+'<tr class="fyGridHeadCols">'+a.join("")+"</tr></thead>";var c=t.hideFooter?"":'<tfoot><tr><td colspan="'+(n||"1")+'"></td></tr></tfoot>';this.jq.append(h+'<tbody id="'+this.jq[0].id+'_tbody"></tbody>'+c);if(t.toolBar){this.toolBar=this.jq.find(".fyToolBar");var u;for(i=0,n=t.toolBar.length;i<n;i++){u=t.toolBar[i];e("<button"+(u.id?' id="'+u.id+'"':"")+' class="fyToolBar_Button" style="'+(u.icon?"background-image:url("+u.icon+")":"text-indent:0")+';" '+(u.disabled?"disabled":"")+">"+u.text+"</button>").click(u.onClick).appendTo(this.toolBar)}this.toolBar.buttons=this.toolBar.find(".fyToolBar_Button");if(t.toolBarPosition==="bottom")this.toolbarCopy();if(t.toolBarPosition==="both")this.toolbarCopy(true)}},makeTemplate:function(t){var i=[],a,o,r=0,l=t.columns?t.columns.length:0;t.bindOptions=e.extend({itemRender:{}},t.bindOptions);for(;r<l;r++){var d=t.columns[r];if(d.group){if(!this.group)this.group=[r];else this.group.push(r)}var h=d.className?" "+d.className:"";if(d.cmd){if(d.cmd==="checkAll")i[r]='<td data-osrc="'+d.src+'" class="font-center cellIndex_'+r+'">'+'<input type="checkbox" name="chk_'+r+'" value="{'+d.src+'}"></td>';else i[r]='<td data-osrc="'+d.src+'" class="font-center cellIndex_'+r+'">'+'<input type="radio" name="chk_'+r+'" value="{'+d.src+'}"></td>'}else{if(typeof d.renderer==="function"){o=d.src+"_Renderer"+ ++s;a=":="+o;t.bindOptions.itemRender[o]=d.renderer}else a="";var c="";if(h&&d.title===n)d.title=true;if(d.title===true)c=' title="{'+d.src+a+'}"';else if(typeof d.title==="string")c=' title="'+d.title.replace(/"/g,'\\"')+'"';var u=d.align?"font-"+d.align.toLowerCase():"";i[r]="<td "+c+' data-osrc="'+d.src+'" class="'+u+" cellIndex_"+r+h+'">{'+d.src+a+"}</td>"}}return"<tr>"+i.join("")+"</tr>"},toolbarCopy:function(t){if(this.toolBar){var e;if(t){e=this.toolBar.parent().clone(true);e.find(".fyToolBar_Button").each(function(t,e){if(e.id)e.id=e.id+"_2"})}else{e=this.toolBar.parent()}this.table.find("tfoot").prepend(e)}},th:function(t){if(t!==n)return this.thead.find("th").eq(parseInt(t,10)||0);else return this.thead.find("th")},hideColumn:function(t){this.th(t).add(this.cols(t)).hide()},rows:function(t){if(t!==n)return this.tbody.find("tr").eq(parseInt(t,10)||0);else return this.tbody.find("tr")},cols:function(t){if(t!==n)return this.tbody.find(".cellIndex_"+t);else return this.tbody.find("td")},selectHandler:function(t,e){this.prevIndex=this.selectedIndex;this.selectedIndex=e;if(this.selectedClass){if(this.prevIndex>-1)this.rows(this.prevIndex).removeClass(this.selectedClass);this.rows(e).addClass(this.selectedClass)}if(typeof this.onSelect==="function")this.onSelect(t)},sortColumn:function(t){var n=this.thead.find("th"),s=this.sortInLocal,a=this;for(var o=0,r=this.columns.length;o<r;o++){if(this.columns[o].sortable){var l=n.eq(o);l.append('<span class="spSortableTH"></span>');if(s){l.click(function(){var t=e(this);t.data("sortType",t.data("sortType")==="desc"?"asc":"desc");var n=t.data("osrc");a.json.data=i.sortOn(a.json.data,n,a.columns[this.cellIndex].sortFunction);if(a.prevSortCol)a.prevSortCol.find(".spSortableTH").text("");a.prevSortCol=t;if(t.data("sortType")==="desc"){a.json.data.reverse();t.find(".spSortableTH").text(" ▾")}else t.find(".spSortableTH").text(" ▴");a.bindData(a.json,false)})}else{n.eq(o).click(function(){var t=e(this),i=t.data("sortType")==="desc"?"asc":"desc";t.data("sortType",i);a.curSortCol=t;if(a.prevSortCol&&a.prevSortCol[0]!=a.curSortCol[0]){a.prevSortCol.find(".spSortableTH").text("")}a.prevSortCol=t;if(i==="desc"){t.find(".spSortableTH").text(" (▾)")}else t.find(".spSortableTH").text(" (▴)");var n={sortBy:t.data("osrc"),sortType:i};a.update(n)})}}}},getCheckValue:function(){var t,e;if(this.cmdCheckAll){t=this.cmdCheckAll.val();e=this.tbody.find("[name='"+t+"']:checked");if(e.length){var i=this.tbody.find("[name='"+t+"']:checked").fieldsToJson();return i[t].push?i[t]:[i[t]]}else return[]}else if(this.cmdCheckOne){t=this.cmdCheckOne.val();e=this.tbody.find(":radio[name='"+t+"']:checked");return e.val()||null}else return null},getCheckData:function(){if(this.cmdCheckAll||this.cmdCheckOne){var t=(this.cmdCheckAll||this.cmdCheckOne).val(),e=this.tbody.find("input[name='"+t+"']"),i=this.cmdCheckAll?[]:null;for(var n=0,s=e.length;n<s;n++){if(e[n].checked){var a={},t;for(t in this.data[n])if(t.indexOf(":")===-1||t===":index"||t===":rowNum")a[t]=this.data[n][t];if(this.cmdCheckOne)return a;else i.push(a)}}return i}else return null},addRow:function(t){this.data.push(t);this.bindData({data:this.data});return this},delRowAt:function(t){this.data.splice(t,1);this.bindData({data:this.data});this.updateHandler(this.data);return this},getModifiedRows:function(){var t=[],e=this.data,i=e.length;while(i--)if(e[i][":modified by user"])t.push(e[i]);return this.getPureData(t)},delRow:function(t){var e=this.items.index(t);this.delRowAt(e);return this},empty:function(){this.tbody.html("");this.data=null;return this},setTitle:function(t){var e=this.table.find("tr.fyGridHeadText");if(e.length){e.find("th:first").html(t)}return this}};i.register("datagrid",a,"ListBase");function o(t,i){setTimeout(function(){t.tbody.find("tr:first").find(".editableTD").eq(0).trigger("click")},100);t.tbody.delegate("td","keydown",function(n){var s=e(this);switch(n.keyCode){case 13:setTimeout(function(){var e=s.nextAll(".editableTD");if(e.length){e.eq(0).trigger("click")}else{var n=s.parent("tr");var a=n.next("tr");if(a.length){a.find(".editableTD").eq(0).trigger("click")}else{if(i){t.addRow(i);t.tbody.find("tr:last").find(".editableTD").eq(0).trigger("click")}}}},20);break;case 37:setTimeout(function(){var t=s.prevAll(".editableTD");if(t.length){t.eq(0).trigger("click")}},20);break;case 38:setTimeout(function(){var t=s.parent("tr").prev("tr"),e;if(t.length){e=t.find("td").eq(s[0].cellIndex);e.trigger("click")}},20);break;case 39:setTimeout(function(){var t=s.nextAll(".editableTD");if(t.length){t.eq(0).trigger("click")}},20);break;case 40:setTimeout(function(){var e=s.parent("tr").next("tr"),n;if(e.length){n=e.find("td").eq(s[0].cellIndex);n.trigger("click")}else{if(i){t.addRow(i);t.tbody.find("tr:last").find(".editableTD").eq(0).trigger("click")}}},20);break;default:;}})}})(window,jQuery,fy);(function(t,e,i){var n=0;var s=function(t,i){var a;if(i.showTitle)a='<option title="{'+(i.text||"text")+'}" value="{'+(i.value||"value")+'}">{'+(i.text||"text")+"}</option>";else a='<option value="{'+(i.value||"value")+'}">{'+(i.text||"text")+"}</option>";var o=e.extend({template:a,elementName:"fyElem_"+ ++n},i),r=this;s.parent.call(this,t,o);this.elementName=o.elementName;this.initSelectedIndex=o.selectedIndex||0;this.autoFire=o.autoFire;if(this.jq[0].tagName!=="SELECT"){this.jq=e('<select name="'+this.elementName+'" class="fui-button theme-select"></select>').appendTo(this.jq)}this.jq.bind("change.fy",function(t){r.selectHandler(t)});if(!this.lazy)this.create()};s.prototype={setSelectedIndex:function(t){this.selectedIndex=this.jq[0].selectedIndex=t;return this},selectHandler:function(t){this.prevIndex=this.selectedIndex;this.selectedIndex=this.jq[0].selectedIndex;if(typeof this.onSelect==="function")this.onSelect(t)},bindHandler:function(t,e){this.items=this.jq.find("option");this.selectedIndex=this.items.length>this.initSelectedIndex?this.initSelectedIndex:this.items.length?0:-1;this.prevIndex=-1;if(typeof this.onBind==="function")this.onBind(t,e);if(this.selectedIndex>-1||this.autoFire){var i=this;setTimeout(function(){if(i.selectedIndex>0)i.setSelectedIndex(i.selectedIndex);if(i.autoFire)i.jq.trigger("change.fy")},0)}},getValue:function(){return this.jq.val()},getText:function(){var t=this.jq[0];if(t.options.length)return t.options[t.selectedIndex].text;return null}};i.register("listBox",s,"ListBase");var a=function(t,i){this.elementName=i.elementName||"fyElem_"+ ++n;var s='<label><input name="'+this.elementName+'" type="checkbox" '+(i.bindOptions&&i.bindOptions.itemRender&&i.bindOptions.itemRender.isChecked?"{v:=isChecked}":"")+' value="{'+(i.value||"value")+'}">{'+(i.text||"text")+"}</label>"+(i.joiner===undefined?" ":i.joiner),o=e.extend({template:s},i),r=this;this.autoFire=!!o.autoFire;a.parent.call(this,t,o);this.jq.bind("change.fy",function(t){r.selectHandler(t)});if(!this.lazy)this.create()};a.prototype={bindHandler:function(t,e){this.items=this.jq.find("input[name='"+this.elementName+"']:checkbox");if(typeof this.onBind==="function")this.onBind(t,e)},getSelectedIndices:function(){var t=this.items.filter(":checked"),e=[],i=this.items;t.each(function(t,n){e.push(i.index(n))});return e},getSelectedItems:function(){return this.items.filter(":checked")},getNoSelectedItems:function(){return this.items.filter(function(t){return!e(this).prop("checked")})},getSelectedData:function(t){var e=this.items.filter(":checked"),i=[],n=this;e.each(function(t,e){var s=n.data[n.items.index(this)],a={},o;for(o in s)if(o.indexOf(":")===-1)a[o]=s[o];i.push(a)});return i},getNoSelectedData:function(){var t=this.items.filter(function(t){return!e(this).prop("checked")}),i=[],n=this;t.each(function(t,e){var s=n.data[n.items.index(this)],a={},o;for(o in s)if(o.indexOf(":")===-1)a[o]=s[o];i.push(a)});return i},getValue:function(t){var i=t?this.items.filter(function(t){return!e(this).prop("checked")}):this.items.filter(":checked"),n=[];if(i.length){i.each(function(t,e){n.push(e.value)});return n}return n},getText:function(t){var i=t?this.items.filter(function(t){return!e(this).prop("checked")}):this.items.filter(":checked"),n=[];if(i.length){i.each(function(t,i){n.push(e(i.parentNode).text())});return n}return n}};i.register("checkBox",a,"ListBase");var o=function(t,i){this.elementName=i.elementName||"fyElem_"+ ++n;var s='<label><input name="'+this.elementName+'" type="radio" value="{'+(i.value||"value")+'}">{'+(i.text||"text")+"}</label>"+(i.joiner===undefined?" ":i.joiner),a=e.extend({template:s,selectedIndex:-1},i),r=this;this.autoFire=!!a.autoFire;this.initSelectedIndex=a.selectedIndex;o.parent.call(this,t,a);this.jq.delegate(":radio","change.fy",function(t){r.selectHandler(t)});if(!this.lazy)this.create()};o.prototype={bindHandler:function(t,e){this.items=this.jq.find("input[name='"+this.elementName+"']:radio");var i=this.items.filter(":checked");this.selectedIndex=i.length?this.items.index(i[0]):this.items.length>this.initSelectedIndex?this.initSelectedIndex:this.items.length?0:-1;this.prevIndex=-1;if(typeof this.onBind==="function")this.onBind(t,e);if(this.autoFire){if(this.initSelectedIndex!==undefined&&this.initSelectedIndex>-1){var n=this;setTimeout(function(){var t=n.initSelectedIndex===undefined?0:n.initSelectedIndex;n.setSelectedIndex(t);n.items.eq(t).prop("checked",true).trigger("change.fy")},0)}}},getValue:function(){return this.items.filter(":checked").val()},getText:function(){var t=this.items.filter(":checked");if(t.length){return t.parent().text()}return null}};i.register("radioBox",o,"ListBase")})(window,jQuery,fy);(function(t,e,i){var n=function(t,i){var s=e.extend({},i);n.parent.call(this,t,s);if(this.jq[0].tagName!=="FORM"){var a=this.jq.children().first();if(a[0].tagName!=="FORM")this.jq=this.jq.wrapInner(e("<form style='padding:0;margin:0;'></form>")).children().first();else this.jq=a}this.action=s.action;this.method=s.method==="post"?"post":s.method==="get"?"get":"getJSON";this.validator=s.validator;this.success=s.success;this.param=null;this.oldData=s.data;if(!this.lazy)this.create();if(s.trigger){var o=this;this.trigger=e(s.trigger).click(function(){o.submit()})}};n.prototype={create:function(){if(typeof this.onInit==="function")this.onInit();this.jq[0].onsubmit=i.PREVENT_FN;if(this.data)this.bindData({data:this.data},true);else if(this.url){this.xhr=e.ajaxSettings.xhr();this.ajax(this.param,true)}else this.data=this.jq.fieldsToJson();return this},bindData:function(t,e){this.oldData=this.data;this.data=t.data;this.jq.jsonToFields(t.data);this.bindHandler(t,e);if(e)this.createHandler(t);else this.updateHandler(t);return this},toJSON:function(){return this.jq.fieldsToJson()},submit:function(t){var n=t?e.extend({},this.data,t):this.toJSON();var s=this.validateHanler(n);if(s){if(this.action){if(this.trigger)this.trigger.prop("disabled",true);if(s===true)s=n;var a=this;e.ajax({url:this.action,dataType:"json",data:s,type:this.method,success:function(t,e,s){if(t.error){if(a.action.handleError)a.action.handleError.call(a.action,t.error);else i.onAjaxError(t.error)}else{a.oldData=n;if(typeof a.success==="function")a.success.call(a,n,t)}},complete:function(t,e){if(a.trigger)a.trigger.prop("disabled",false)}})}else{this.oldData=n;if(typeof this.success==="function")this.success(n)}}return this},ajaxEndHandler:function(t,e){if(typeof this.onAjaxEnd==="function")this.onAjaxEnd(t,e)},reset:function(){this.jq.jsonToFields(this.oldData);return this},clear:function(){this.jq.reset();return this},validateHanler:function(t){var e=true;if(typeof this.validator==="function")e=this.validator(t);return e}};i.register("form",n,"AjaxDisplayObject")})(window,jQuery,fy);(function(t,e,i,n){var s=function(t,i){var n={textSrc:"text",selectedIndex:-1,bindOptions:{},selectedClass:"current",eventType:"click.fy"};var a="",o=e.extend(n,i);if(o.renderer&&!o.bindOptions.itemRender){var r="renderer";a=":="+r;o.bindOptions.itemRender={};o.bindOptions.itemRender[r]=o.renderer}if(!o.bindOptions.template)o.bindOptions.template=o.template||"<li>{"+o.textSrc+a+"}</li>";s.parent.call(this,t,o);this.selectedClass=o.selectedClass;this.selectedIndex=o.selectedIndex;this.eventType=o.eventType;this.title=o.title;if(this.jq[0].tagName!=="UL")this.jq=e('<ul class="fui-list" style="width: 100%; height: 100%; margin: 0; padding: 0;"></ul>').appendTo(this.jq);else this.jq.addClass("fui-list");if(!this.lazy)this.create(o)};s.prototype={createHandler:function(t){var e=this;this.created=true;this.items=this.jq.find("li");if(this.title){this.jq.prepend('<div class="listHead">'+this.title+"</div>")}this.jq.delegate("li",this.eventType,function(t,i){if(t.target.tagName==="LABEL")return;e.selectHandler(t,!!i)});if(this.selectedIndex!==-1){this.items.eq(this.selectedIndex).trigger(this.eventType)}if(typeof this.onCreate==="function")this.onCreate(t)},updateHandler:function(t,e){if(!e)this.items=this.jq.find("li");if(typeof this.onUpdate==="function")this.onUpdate(t,e);if(typeof this.onUpdateOnce==="function"){this.onUpdateOnce(t,e);delete this.onUpdateOnce}},setSelectedIndex:function(t){this.items.eq(t).trigger(this.eventType,true);return this},selectHandler:function(t,i){var n=this.items.index(t.currentTarget);if(n===this.selectedIndex&&this.prevIndex!=-1)return;this.prevIndex=this.selectedIndex;this.selectedIndex=n;this.items.eq(this.prevIndex).removeClass(this.selectedClass);e(t.currentTarget).addClass(this.selectedClass);if(typeof this.onSelect==="function")this.onSelect(t,i)}};i.register("list",s,"ListBase")})(window,jQuery,fy);(function(t,e,i,n){var s=function(t,i){var n={title:"对话框",hideFade:true},a=e.extend(n,i);s.parent.call(this,t,a);this.boxy=null;this.create(a)};s.prototype={create:function(t){if(typeof this.onInit==="function")this.onInit();this.boxy=new Boxy(this.jq,t);this.jq=this.boxy.boxy;this.createHandler();return this},get:function(t){return this.boxy.get(t)},getInner:function(){return this.boxy.getInner()},getContent:function(){return this.boxy.getContent()},setContent:function(t){this.boxy.setContent(t);return this},getTitle:function(){return this.boxy.getTitle()},setTitle:function(t){this.boxy.setTitle(t);return this},getPosition:function(){var t=this.boxy.getPosition();return{x:t[0],y:t[1]}},moveTo:function(t,e){this.boxy.moveTo(t,e);return this},moveToX:function(t){this.boxy.moveToX(t);return this},moveToY:function(t){this.boxy.moveToY(t);return this},center:function(t){this.boxy.center(t);return this},centerAt:function(t,e){this.boxy.centerAt(t,e);return this},getCenter:function(){var t=this.boxy.getCenter();return{x:t[0],y:t[1]}},resize:function(t,e,i){this.boxy.resize(t,e,i);return this},tween:function(t,e,i){this.boxy.tween(t,e,i);return this},getSize:function(){var t=this.boxy.getSize();return{width:t[0],height:t[1]}},getContentSize:function(){var t=this.boxy.getContentSize();return{width:t[0],height:t[1]}},estimateSize:function(){var t=this.boxy.estimateSize();return{width:t[0],height:t[1]}},toTop:function(){this.boxy.toTop();return this},show:function(){this.boxy.show().toTop();return this},hide:function(t){this.boxy.hide(t);return this},toggle:function(){this.boxy.toggle();return this},maximum:function(){this.boxy.winState=null;if(this.boxy.btnMax)this.boxy.btnMax.trigger("click");else this.boxy.maximum();return this},closeAndDestroy:function(t){this.boxy.hideAndUnload(t);return this},destroy:function(){this.boxy.unload();return this},isVisible:function(){return this.boxy.isVisible()},isModalVisible:function(){return this.boxy.isModalVisible()}};i.register("popup",s,"DisplayObject");i.dialog=function(t,n,s,a){var o=Boxy.ask(t,n,s,e.extend({title:null,show:true,unloadOnHide:true},a));return i(o[0]).popup(o[1])};i.alert=function(t,n,s){var a=Boxy.alert(t,n,e.extend({title:null,show:true,unloadOnHide:true},s));var o=i(a[0]).popup(a[1]);o.jq.find(".answers>.fyBtnImportant")[0].focus();return o};i.confirm=function(t,n,s){var a=Boxy.confirm(t,n,e.extend({title:"请确认您的操作",show:true,unloadOnHide:true},s));return i(a[0]).popup(a[1])};var a={};i.getPopuppedIFrames=function(){return a};i.popIFrame=function(s,o,r){var l=s.oUrl||s.url;var d=a[l];if(d&&i.popupManager.get(d)){return i.popupManager.get(a[l]).toTop()}else{if(s.cache){for(var h in s.cache){i.cache(h,s.cache[h])}}d=e('<iframe frameborder="0" style="width: '+(s.w||660)+"px; height: "+(s.h||360)+'px;"  src="'+s.url+'"></iframe>');a[l]=d[0];if(!o)o={};o.unloadOnHide=true;if(o.modal==n)o.modal=.1;var c=o.afterHide;o.afterHide=function(){if(c)c.call(this);delete a[l];if(s.cache){for(var t in s.cache){i.removeCache(t)}}delete s.cache;s=null};if(s.mode==="dialog"||s.mode==="confirm"||s.mode==="alert"){var u;if(o.callback){var f=o.callback;u=function(t,e,i){if(f){var n=f.call(this,t,e,i);if(n)return true}return false};delete o.callback}if(s.mode==="dialog")return i.dialog(d,r,u,o);else return i[s.mode](d,u,o)}else{return t.fy(d).popup(o)}}};i.popToTop=function(t,e,i){top.fy.popIFrame(t,e,i)};i.popHTML=function(t,i){i=i||{};var n={url:t,type:"GET",dataType:"html",cache:false,success:function(t){t=jQuery(t);if(i.filter)t=jQuery(i.filter,t);new Boxy(t,i)}};e.each(["type","cache"],function(){if(this in i){n[this]=i[this];delete i[this]}});e.ajax(n)};i.popImage=function(t,i){var n=new Image;n.onload=function(){new Boxy(e('<div class="boxy-image-wrapper"/>').append(this),i)};n.src=t}})(window,jQuery,fy);jQuery.fn.boxy=function(t){t=t||{};return this.each(function(){var e=this.nodeName.toLowerCase(),i=this;if(e==="a"){jQuery(this).click(function(){var e=Boxy.linkedTo(this),i=this.getAttribute("href"),n=jQuery.extend({actuator:this,title:this.title},t);if(i.match(/(&|\?)boxy\.modal/))n.modal=true;if(e){e.show()}else if(i.indexOf("#")>=0){var s=jQuery(i.substr(i.indexOf("#"))),a=s.clone(true);s.remove();n.unloadOnHide=false;new Boxy(a,n)}else if(i.match(/\.(jpe?g|png|gif|bmp)($|\?)/i)){n.unloadOnHide=true;Boxy.loadImage(this.href,n)}else{if(!n.cache)n.unloadOnHide=true;Boxy.load(this.href,n)}return false})}else if(e=="form"){jQuery(this).bind("submit.boxy",function(){Boxy.confirm(t.message||"Please confirm:",function(){jQuery(i).unbind("submit.boxy").submit()});return false})}})};function Boxy(t,e){this.boxyId="boxy_"+Math.random().toString().substr(2)+(new Date).valueOf().toString().substr(-6);this.boxy=jQuery(Boxy.WRAPPER).attr("id",this.boxyId);jQuery.data(this.boxy[0],"boxy",this);this.visible=false;this.options=jQuery.extend({},Boxy.DEFAULTS,e||{});if(this.options.actuator){jQuery.data(this.options.actuator,"active.boxy",this)}t=$(t||"<div></div>");this.setContent(t);this._setupTitleBar();this.boxy.css("display","none").appendTo(document.body);this.toTop();t=jQuery(t).eq(0);var i=jQuery(window).height()-125;if(i<t.outerHeight(true)){t.height(i)}if(this.options.fixed){if(Boxy.IE6){this.options.fixed=false}else{this.boxy.addClass("fixed")}}if(this.options.center&&Boxy._u(this.options.x,this.options.y)){this.center()}else{this.moveTo(Boxy._u(this.options.x)?Boxy.DEFAULT_X:this.options.x,Boxy._u(this.options.y)?Boxy.DEFAULT_Y:this.options.y)}if(this.options.show)this.show()}fy.popupManager=Boxy;Boxy.EF=fy.EMPTY_FN;Boxy.PREVENT_FN=fy.PREVENT_FN;jQuery.extend(Boxy,{WRAPPER:'<div class="boxy-wrapper"><div class="boxy-inner"></div></div>',DEFAULTS:{title:null,closeable:true,minimizable:false,maximizable:false,draggable:true,clone:false,actuator:null,center:true,show:true,modal:false,fixed:true,closeText:"",maxText:"",minText:"",restoreText:"",unloadOnHide:false,clickToFront:false,behaviours:Boxy.EF,afterDrop:Boxy.EF,afterShow:Boxy.EF,afterHide:Boxy.EF,beforeUnload:Boxy.EF,beforeHide:Boxy.EF,onMax:Boxy.EF,onMin:Boxy.EF,onRestore:Boxy.EF,hideFade:false,hideShrink:"vertical"},IE6:jQuery.browser.msie&&jQuery.browser.version<7,DEFAULT_X:50,DEFAULT_Y:50,MODAL_OPACITY:.05,zIndex:9e3,dragConfigured:false,resizeConfigured:false,dragging:null,load:function(t,e){e=e||{};var i={url:t,type:"GET",dataType:"html",cache:false,success:function(t){t=jQuery(t);if(e.filter)t=jQuery(e.filter,t);new Boxy(t,e)}};jQuery.each(["type","cache"],function(){if(this in e){i[this]=e[this];delete e[this]}});jQuery.ajax(i)},loadImage:function(t,e){var i=new Image;i.onload=function(){new Boxy($('<div class="boxy-image-wrapper"/>').append(this),e)};i.src=t},get:function(t){var e=jQuery(t).parents(".boxy-wrapper");return e.length?jQuery.data(e[0],"boxy"):null},linkedTo:function(t){return jQuery.data(t,"active.boxy")},alert:function(t,e,i){if(typeof e!="function"&&!i){i=e;e=null}var n=Boxy.ask(t,[i.btnOK?i.btnOK:"确定"],e,i);var s=n[0].eq(1).find("button");s.eq(0).addClass("fyBtnImportant");return n},confirm:function(t,e,i){var n=Boxy.ask(t,[i.btnOK?i.btnOK:"确定",i.btnCancel?i.btnCancel:"取消"],function(t,i,n){if(t===0)return e(t,i,n);return void 0},i);var s=n[0].eq(1).find("button");s.eq(0).addClass("fyBtnImportant");s.eq(1).addClass("fyBtn");return n},ask:function(t,e,i,n){t=jQuery('<div class="question"></div>').append(t).appendTo("body");var s=jQuery(window).height()-125;if(s<t.outerHeight(true)){t.height(s)}n=jQuery.extend({title:"网页对话框",show:true,modal:true,closeable:false},n||{});var a=jQuery("<div></div>").append(t);a.ifrWin=t.find("iframe").length>0;var o=jQuery('<div class="answers"></div>');o.html(jQuery.map(Boxy._values(e),function(t,e){var i,n;if(typeof t==="string"){i=e===0?"fyBtnImportant":"fyBtn";n=t}else{i=t.className||"";n=t.text||""}return'<button class="boxy-button '+i+'" name="'+e+'">'+n+"</button>"}).join(" "));jQuery("button",o).click(function(e){var n=this;if(i){var s;if(a.ifrWin){var o=t.find("iframe")[0];s=o.contentWindow?o.contentWindow:o.contentDocument.defaultView}var r=parseInt(n.name,10);var l=i(r,e,s);s=null;if(!l)Boxy.get(n).hide()}else Boxy.get(n).hide()});a.after(o);return[a.add(o),n]},isModalVisible:function(){return jQuery(".boxy-modal-blackout").length>0},_u:function(){for(var t=0;t<arguments.length;t++)if(typeof arguments[t]!="undefined")return false;return true},_values:function(t){if(t instanceof Array)return t;var e=[];for(var i in t)e.push(t[i]);return e},_handleResize:function(t){jQuery(".boxy-modal-blackout").css("display","none").css(Boxy._cssForOverlay()).css("display","block")},_handleDrag:function(t){var e=Boxy.dragging;if(e){var i=t.pageX-e[1];var n=t.pageY-e[2];if(i<3)i=3;else if(i>e[3])i=e[3];if(n<3)n=3;else if(n>e[4])n=e[4];var s=";left:"+i+"px;top:"+n+"px;";Boxy.dragConfigured[0].style.cssText+=s;if(e[5])e[0].style.cssText+=s}},_nextZ:function(){return Boxy.zIndex++},_viewport:function(){var t=document.documentElement,e=document.body,i=window;return jQuery.extend(jQuery.browser.msie?{left:e.scrollLeft||t.scrollLeft,top:e.scrollTop||t.scrollTop}:{left:i.pageXOffset,top:i.pageYOffset},!Boxy._u(i.innerWidth)?{width:i.innerWidth,height:i.innerHeight}:!Boxy._u(t)&&!Boxy._u(t.clientWidth)&&t.clientWidth!=0?{width:t.clientWidth,height:t.clientHeight}:{width:e.clientWidth,height:e.clientHeight})},_setupModalResizing:function(){if(!Boxy.resizeConfigured){Boxy.resizeConfigured=true}},_cssForOverlay:function(){if(Boxy.IE6){return Boxy._viewport()}else{return{width:"100%",height:jQuery(document).height()}}}});Boxy.prototype={estimateSize:function(){this.boxy.css({visibility:"hidden",display:"block"});var t=this.getSize();this.boxy.css("display","none").css("visibility","visible");return t},getSize:function(){return[this.boxy.outerWidth(),this.boxy.outerHeight()]},getContentSize:function(){var t=this.getContent();return[t.width(),t.height()]},getPosition:function(){var t=this.boxy[0];return[t.offsetLeft,t.offsetTop]},getCenter:function(){var t=this.getPosition();var e=this.getSize();return[Math.floor(t[0]+e[0]/2),Math.floor(t[1]+e[1]/2)]},getInner:function(){return jQuery(".boxy-inner",this.boxy)},getContent:function(){var t=jQuery(".boxy-content",this.boxy);if(t.length>1)t=t.find(".question").children(":first");return t},setContent:function(t){t=jQuery(t).css({display:"block"}).addClass("boxy-content");if(this.options.clone)t=t.clone(true);this.getContent().remove();var e=this.getContentSize();this.getInner().append(t);this.options.behaviours.call(this,t);if(t.prop("tagName")=="IFRAME"){if(navigator.userAgent.match(/iPad|iPhone/i)){if(jQuery(".ioswrap",this.boxy).length==0){var i=$('<div class="ioswrap" style="overflow: auto;-webkit-overflow-scrolling: touch;"></div>');jQuery(".boxy-content",this.boxy).wrap(i)}}}return this},setIosSwapSize:function(t){jQuery(".ioswrap",this.boxy).height(t.height())},moveTo:function(t,e){if(typeof t=="number"&&typeof e=="number")this.boxy.css({left:t,top:e});return this},moveToX:function(t){if(typeof t=="number")this.boxy.css({left:t});else this.centerX();return this},moveToY:function(t){if(typeof t=="number")this.boxy.css({top:t});else this.centerY();return this},centerAt:function(t,e){var i=this[this.visible?"getSize":"estimateSize"]();if(typeof t=="number"){var n=t-i[0]/2;this.moveToX(n<0?0:n)}if(typeof e=="number"){var s=e-i[1]/2;this.moveToY(s<0?0:s)}return this},centerAtX:function(t){return this.centerAt(t,null)},centerAtY:function(t){return this.centerAt(null,t)},center:function(t){var e=Boxy._viewport();var i=this.options.fixed?[0,0]:[e.left,e.top];if(!t||t=="x")this.centerAt(i[0]+e.width/2,null);if(!t||t=="y")this.centerAt(null,i[1]+e.height/2);return this},centerX:function(){return this.center("x")},centerY:function(){return this.center("y")},resize:function(t,e,i){if(!this.visible)return this;var n=this._getBoundsForResize(t,e);var s=this.getContent();s.css({width:n[2],height:n[3]});if(i)i(this);if(jQuery(".ioswrap",this.boxy).length)this.setIosSwapSize(s);return this},tween:function(t,e,i){if(!this.visible)return this;var n=this._getBoundsForResize(t,e);var s=this;this.boxy.stop().animate({left:n[0],top:n[1]},300);this.getContent().stop().animate({width:n[2],height:n[3]},300,function(){if(i)i(s)});return this},maximum:function(t){var e=jQuery(window),i=this.boxy.stop(true,true),n=this.getContent();var s=n.width(),a=n.height();if(t){this.winState="max";var o=this.getPosition(),r={l:o[0],t:o[1],w:s,h:a};this.btnMax.data("size",r).removeClass("max").text(this.options.restoreText).addClass("restore");var l=this,d,h=function(){l.maximum();d=null};e.bind("resize.boxy"+this.boxyId,function(){if(!d)d=setTimeout(h,200)});this.boxy.css({left:0,top:0,zIndex:++Boxy.zIndex})}else{this.boxy.css({left:0,top:0})}n.css({width:e.width()-(i.outerWidth()-s),height:e.height()-(i.outerHeight()-a)});jQuery(".boxy-content",this.boxy).css({width:n.width(),height:n.height()});if(jQuery(".ioswrap",this.boxy).length)this.setIosSwapSize(n)},minimum:function(t){if(!this.visible)return this;this.boxy.stop(true,true);this.winState="min";this.hide(this.options.onMin,true,true);return this},restoreSize:function(){this.winState="normal";$(window).unbind("resize.boxy"+this.boxyId);var t=this.btnMax.removeClass("restore").text(this.options.maxText).addClass("max").data("size");this.resize(t.w,t.h).moveTo(t.l,t.t)},isVisible:function(){return this.visible},show:function(){if(this.visible){this.toTop();return this}if(this.options.modal){var t=typeof this.options.modal==="number"?this.options.modal:Boxy.MODAL_OPACITY;this.modalBlackout=jQuery('<div class="boxy-modal-blackout"></div>').css({zIndex:Boxy._nextZ(),opacity:t}).appendTo(document.body);this.toTop()}this.getInner().stop().css({width:"",height:""});if(fy.browser.msie&&fy.browser.version<10){this.boxy.stop(true,true).css({opacity:1,display:"block"})}else{this.boxy.stop(true,true).css({opacity:0,display:"block"});var e=this.boxy.position().top;this.boxy.css({top:e-20}).animate({opacity:1,top:e},200)}this.visible=true;var i=this.boxy.find(".fyBtnImportant");if(i.length)i.eq(0).focus();this._fire("afterShow");return this},hide:function(t,e,i){if(!this.visible)return this;var n=this;n._fire("beforeHide");if(this.options.modal){jQuery(document.body).unbind("keypress.boxy");this.modalBlackout.animate({opacity:0},200,function(){jQuery(this).remove()})}var s={boxy:{},inner:{}},a=0;if(fy.browser.msie&&fy.browser.version<9){var o=this.getPosition();n.boxy.css({display:"none",left:o[0],top:o[1]});n.visible=false;n._fire("afterHide");if(t)t(n);if(!e&&n.options.unloadOnHide)n.unload()}else{if(this.options.hideShrink){var r=this.getInner(),l=this.options.hideShrink,o=this.getPosition();a|=1;if(l===true||l=="vertical"){if(i){var d=this.options.minimizable;if(d.offset){var h=d.offset();s.boxy.top=h.top;s.boxy.left=h.left+64}else{var c=$(document);s.boxy.top=c.height()-10;s.boxy.left=c.width()+r.width()>>1>>1}s.inner.height=0;s.inner.width=0;r.height(100)}else s.boxy.top=o[1]-40}if(l===true||l=="horizontal"){s.inner.width=0;s.boxy.left=o[0]+r.width()>>1}}if(this.options.hideFade){a|=2;s.boxy.opacity=0}var u=function(){n.boxy.css({display:"none",left:o[0],top:o[1]});n.visible=false;n._fire("afterHide");if(t)t(n);if(!e&&n.options.unloadOnHide)n.unload()};if(a){if(a&1)r.stop().animate(s.inner,i?300:200);this.boxy.stop(true,true).animate(s.boxy,i?300:200,u)}else{u()}}return this},toggle:function(){this[this.visible?"hide":"show"]();return this},hideAndUnload:function(t){this.options.unloadOnHide=true;this.hide(t);return this},unload:function(){this._fire("beforeUnload");jQuery.removeData(this.boxy[0]);if(this.options.actuator){jQuery.data(this.options.actuator,"active.boxy",false)}if(this.options.maximizable){if(this.winState){$(window).unbind("resize.boxy"+this.boxyId);jQuery.removeData(this.btnMax);this.btnMax=null}}this.getInner().find(".title-bar").unbind().find(".btnSets").unbind();this.boxy.remove()},toTop:function(){this.boxy.css({zIndex:Boxy._nextZ()});return this},getTitle:function(){return jQuery("> .title-bar h2",this.getInner()).html()},setTitle:function(t){jQuery("> .title-bar h2",this.getInner()).html(t);return this},_getBoundsForResize:function(t,e){var i=this.getContentSize();var n=[t-i[0],e-i[1]];var s=this.getPosition();return[Math.max(s[0]-n[0]/2,0),Math.max(s[1]-n[1]/2,0),t,e]},_setupTitleBar:function(){if(this.options.title){var t=this;var e=jQuery("<div class='title-bar'></div>").html("<h2>"+this.options.title+"</h2>");e[0].onselectstart=Boxy.PREVENT_FN;var i=jQuery('<div class="btnSets"></div>').appendTo(e);if(this.options.helphtml){i.append(jQuery("<a href='javascript:void(0)' class='help'></a>"))}if(this.options.minimizable){i.append(jQuery("<a href='javascript:void(0)' class='min'></a>").html(this.options.minText))}if(this.options.maximizable){this.btnMax=jQuery("<a href='javascript:void(0)' class='max'></a>").html(this.options.maxText);i.append(this.btnMax)}if(this.options.closeable){i.append(jQuery("<a href='javascript:void(0)' class='close'></a>").html(this.options.closeText))}if(this.options.draggable){if(!Boxy.dragConfigured){Boxy.dragConfigured=jQuery('<div id="boxy-helper" style=""></div>').appendTo("body");if(!document.addEventListener){Boxy.dragConfigured.css({border:"2px dotted #000",backgroundColor:"#fff",opacity:.2})}}e.mousedown(function(i){t.toTop();if(i.target.tagName==="A")return;if(i.button<2&&t.winState!=="max"){e.bind("mousemove.boxy",function(i){e.unbind("mousemove.boxy");var n=t.boxy[0];Boxy.dragConfigured.css({display:"block",top:n.offsetTop,left:n.offsetLeft,width:t.boxy.outerWidth(),height:t.boxy.outerHeight()});document.onselectstart=Boxy.PREVENT_FN;var s=t.getSize();Boxy.dragging=[n,i.pageX-n.offsetLeft,i.pageY-n.offsetTop,document.body.scrollWidth-s[0],document.body.scrollHeight-s[1],document.addEventListener?true:false];if(!document.addEventListener){Boxy.dragConfigured[0].setCapture();t.boxy.hide(0)}jQuery(document).bind("mousemove.boxy",Boxy._handleDrag).bind("mouseup.boxy",function(){if(t.winState!=="max"&&Boxy.dragging){Boxy.dragConfigured.hide();jQuery(document).unbind(".boxy");if(!document.removeEventListener){Boxy.dragConfigured[0].releaseCapture();t.boxy.show(0).css({top:Boxy.dragConfigured[0].style.top,left:Boxy.dragConfigured[0].style.left})}Boxy.dragging=document.onselectstart=null;t._fire("afterDrop")}})});e.bind("mouseup.boxy",function(){e.unbind(".boxy")})}})}this.getInner().prepend(e);this._setupDefaultBehaviours(e)}},_setupDefaultBehaviours:function(t){var e=this;if(this.options.clickToFront){t.click(function(){e.toTop()})}jQuery(".close",t).click(function(){e.hide();return false});if(this.btnMax){jQuery(".max",t).click(function(t){if(e.winState==="max"||e.winState==="min")e.restoreSize(t.currentTarget);else e.maximum(true);return false});t.dblclick(function(t){t.stopPropagation();e.btnMax.trigger("click")})}jQuery(".min",t).click(function(t){e.minimum(t.currentTarget);return false});jQuery(".help",t).click(function(t){var i=e.options.helphtml,n=$('<div style="width: 800px;height: 600px;overflow: auto;"></div>');if(typeof i==="function")i(function(t){fy(n.html(t)).popup({closeable:true,modal:true,show:true,title:"帮助"})});else fy(n.html(i)).popup({closeable:true,modal:true,show:true,title:"帮助"});return false})},_fire:function(t){this.options[t].call(this)}};(function(t,e,i,n){var s=function(t,i){var n=this,a=e.extend({eventType:"click",autoHeight:true},i);s.parent.call(this,t,a);this.tabNavigation=e("ul.tabUL",t).eq(0);if(!this.tabNavigation.length){this.tabNavigation=e('<div class="tabNavigator"><div class="tabWrap"><ul class="tabUL"></ul></div></div>').appendTo(t).find("ul.tabUL")}var o=this.tabNavigation.parent(),r=o.parent();if(!r.hasClass("tabNavigator")){o.wrap('<div class="tabNavigator"></div>')}this.tabNavigation.delegate(".tabCloser","click",function(t){n.removeTab(e(t.target).parent())});this.autoHeight=a.autoHeight;if(a.eventType=="mouseover"||a.eventType=="hover"){a.eventType="mouseenter"}this.eventType=a.eventType;var l=this.tabNavigation.find("li"),d,h;this.tabItems={length:l.length};for(var c=0,u=l.length;c<u;c++){d=l.eq(c);h=d.attr("tab");this.tabItems[h]=d;if(this.closable)e('<div class="tabCloser"></div>').prependTo(d)}if(typeof a.onAddTab==="function"){this.onAddTab=a.onAddTab;delete a.onAddTab}if(typeof a.onRemoveTab==="function"){this.onRemoveTab=a.onRemoveTab;delete a.onRemoveTab}if(typeof a.onOpenTab==="function"){this.onOpenTab=a.onOpenTab;delete a.onOpenTab}this.create(a)};s.prototype={create:function(i){if(typeof this.onInit==="function")this.onInit();this.jq.doTab(i);this.createHandler(this.data);if(this.autoHeight){var n=0,s=this;e(t).resize(function(){if(n)clearTimeout(n);n=setTimeout(function(){s.adjustHeight()},50)})}return this},adjustHeight:function(){var t=this.jq.innerHeight()-this.jq.find("ul.tabUL").outerHeight();if(t<60)return;this.jq.find("div.tabDivision").css("height",t-2)},getBox:function(t){if(typeof t==="number")return this.jq.find("div.tabDivision").eq(t);else if(typeof t==="string"){var i=t.indexOf("#")===-1?"#"+t:t;return e(i,this.jq)}else return this.getBox(0)},openTab:function(t){var i;if(typeof t==="number"){this.tabNavigation.find("li").eq(parseInt(t,10)).trigger(this.eventType);if(typeof this.onOpenTab==="function")this.onOpenTab()}else if(typeof t==="string"){i=t.indexOf("#")===-1?"#"+t:t;this.tabItems[i].trigger(this.eventType);if(typeof this.onOpenTab==="function")this.onOpenTab()}else{i=t.id.indexOf("#")===-1?"#"+t.id:t.id;if(!this.tabItems[i])this.addTab(e.extend({id:i},t));return this.openTab(i)}return this},addTab:function(t){var i=t.id;if(i.indexOf("#")===-1)i="#"+i;var n=i.substr(1);var s=e('<li tab="'+i+'">'+t.title+"</li>").appendTo(this.tabNavigation);var a=e('<div id="'+n+'" class="tabDivision"></div>').appendTo(this.jq);var o=this.tabNavigation.find("div.clear");if(o.length)o.appendTo(this.tabNavigation);else this.tabNavigation.append('<div class="clear"></div>');if(t.content)a.append(t.content);if(t.src)a.append('<iframe id="tab_iframe_'+n+'" name="tab_iframe_named_'+n+'" src="'+t.src+'" style="width:100%; height:100%; margin:0;padding:0" />');if(t.closable){var r=e('<div class="tabCloser"></div>').prependTo(s)}this.tabItems[i]=s;this.tabItems.length++;if(this.autoHeight){this.adjustHeight()}if(typeof this.onAddTab==="function")this.onAddTab();return this},removeTab:function(t){var i,n,s;if(typeof t==="string"){i=t;if(i.indexOf("#")===-1)i="#"+i;t=this.tabNavigation.find("li[tab='"+i+"']")}else i=t.attr("tab");if(t.hasClass("current")){n=this.tabNavigation.find("li").filter(".current").index();if(n)s=this.tabNavigation.find("li:eq("+--n+")").attr("tab");else s=this.tabNavigation.find("li:eq("+ ++n+")").attr("tab");if(this.tabItems.length>1)this.openTab({id:s})}delete this.tabItems[i];this.tabItems.length--;e(i).remove();t.remove();if(typeof this.onRemoveTab==="function")this.onRemoveTab();return this}};i.register("tab",s,"DisplayObject")})(window,jQuery,fy);(function(t){t.fn.extend({doTab:function(e){var i=t.extend({initTabIndex:0,delay:100,eventType:"mouseenter"},e);var n="#"+t(this).attr("id");var s=function(t,e){e.show().siblings("div.tabDivision:visible").hide();t.addClass("current").siblings("li.current").removeClass("current");if(typeof i.onChange==="function"){i.onChange(a.find("li").index(t),t,e)}};t(n+" > div.tabDivision").eq(i.initTabIndex).show();var a=t(n+" ul.tabUL").find("li:eq("+i.initTabIndex+")").addClass("current").end().delegate("li",i.eventType+".doTab",function(e){var n=t(e.target);var a=n.attr("tab");var o=t(a);if(o.css("display")!="block"){if(i.eventType=="mouseenter"){function r(){s(n,o)}n.data("timer",setTimeout(r,i.delay))}else s(n,o)}});if(i.eventType=="mouseenter"){a.delegate("li","mouseleave.doTab",function(){var e=t(this);clearTimeout(e.data("timer"));e.data("timer",null)})}return this},undoTab:function(){t("ul.tabUL",this).undelegate("li",".doTab");return this}})})(jQuery);(function(t,e,i,n){var s=function(t,i){var n={eventType:"click",selectedIndex:0,labelField:"label",bindOptions:{itemRender:{chkDisable:function(t){return t?'class="tabDisabled"':""}}}};if(i.iconField)n.template='<li {disabled:=chkDisable}><img class="tabIco" src="{'+i.iconField+'}">{'+(i.labelField||n.labelField)+"}</li>";else n.template="<li {disabled:=chkDisable}>{"+(i.labelField||n.labelField)+"}</li>";var a=e.extend(n,i);if(i.data&&typeof i.data[0]==="string"){var o=[];for(var r=0,l=i.data.length;r<l;r++){o[r]={};o[r][a.labelField]=i.data[r]}a.data=o}s.parent.call(this,t,a);if(a.eventType.indexOf("mouse")>-1||a.eventType==="hover")a.eventType="mouseenter";this.eventType=a.eventType+".fy";this.initSelectedIndex=this.selectedIndex=a.selectedIndex;this.autoFire=!!a.autoFire;this.jq=e("ul.tabUL",t).eq(0);if(!this.jq.length){this.jq=e('<div class="tabNavigator"><div class="tabWrap"><ul class="tabUL"></ul></div></div>').appendTo(t).find("ul.tabUL")}if(a.onSelect)this.onChange=a.onSelect;this.create(a)};s.prototype={createHandler:function(t){var e=this,i,n;if(this.eventType==="mouseenter.fy"){i=function(t){n=setTimeout(function(){e.selectHandler.call(e,t)},150)};this.jq.delegate("li","mouseleave.fy",function(){clearTimeout(n)})}else i=function(t){e.selectHandler.call(e,t)};this.jq.on(this.eventType,"li:not(.tabDisabled)",i);if(typeof this.onCreate==="function")this.onCreate(t);return this},bindHandler:function(t,e){this.items=this.jq.find("li");this.selectedIndex=this.items.length>this.initSelectedIndex?this.initSelectedIndex:this.items.length?0:-1;this.prevIndex=-1;if(typeof this.onBind==="function")this.onBind(t,e);if(this.autoFire&&this.selectedIndex>-1){var i=this;setTimeout(function(){i.setSelectedIndex(i.selectedIndex)},0)}},selectHandler:function(t){var i=t.target,n=this.items.index(i);if(n===this.selectedIndex&&this.prevIndex!=-1)return;e(i).addClass("current").siblings("li.current").removeClass("current");this.prevIndex=this.selectedIndex;this.selectedIndex=n;if(typeof this.onSelect==="function")this.onSelect.call(this,t)},setSelectedIndex:function(t){this.jq.find("li:eq("+t+")").trigger(this.eventType);return this}};i.register("tabBar",s,"ListBase");var a=function(t,n){n.autoFire=true;n.onSelect=function(){this.iframe.attr("src",this.getSelectedData()[this.urlField])};var s=n.minWidth?' style="min-width:'+n.minWidth+'px;"':"";this.tabBar=i(e("<div"+s+"></div>").appendTo(t)).tabBar(n);this.tabBar.urlField=n.urlField||"url";this.tabBar.iframe=e('<iframe frameborder="0" src="about:blank"></iframe>').appendTo(e('<div class="tabStack"'+s+"></div>").appendTo(t))};i.register("tabNavigator",a,"DisplayObject")})(window,jQuery,fy);(function(t,e,i,n){var s=function(t,i){var n="",a=e.extend({bindOptions:{},textSrc:"text",animated:100,control:e("<span><a></a><a></a><a></a></span>"),collapsed:true,fullyUpdate:false},i);if(i.renderer){n=":=render";a.bindOptions.itemRender={render:i.renderer}}if(!a.bindOptions.template)a.bindOptions.template=a.template||"<li><span>{"+a.textSrc+n+"}</span></li>";s.parent.call(this,t,a);this.selectedClass=a.selectedClass||"current";this.selectedIndex=a.selectedIndex;this.eventType="click.fy";this.updateKey=a.updateKey||"id";this.control=a.control.find("a");this.fullyUpdate=a.fullyUpdate;if(this.jq[0].tagName.toLowerCase()!=="ul")this.jq=e('<ul class="treeview"></ul>').appendTo(this.jq);else this.jq.addClass("treeview");if(a.fileTree)this.jq.addClass("filetree");this.sets=a;if(!this.lazy)this.create(a)};s.prototype={createHandler:function(t){this.created=true;var e=this;this._selectedItem=null;this.jq.delegate("li",this.eventType,function(t){t.stopPropagation();e.selectHandler(t,e.selectedIndex)});if(typeof this.onCreate==="function")this.onCreate(t)},selectHandler:function(t){if(this._selectedItem!==null&&this._selectedItem[0]===t.currentTarget)return;if(this.selectedClass)if(this._selectedItem)this._selectedItem.children("span").removeClass(this.selectedClass);this._selectedItem=e(t.currentTarget);if(this.selectedClass)if(this._selectedItem)this._selectedItem.children("span").addClass(this.selectedClass);this._selectedData=this._selectedItem.data("treeItem");if(typeof this.onSelect==="function")this.onSelect(t,this._selectedData);if(this._selectedItem.hasClass("hasChildren")){this._selectedItem.removeClass("hasChildren");var i={};i[this.updateKey]=this._selectedData[this.updateKey];this.update(i)}},updateHandler:function(t,e){e=!!e;if(typeof this.onUpdate==="function")this.onUpdate(t,e);if(typeof this.onUpdateOnce==="function"){this.onUpdateOnce(t,e);delete this.onUpdateOnce}},getSelectedData:function(){if(this._selectedData)return this._selectedData;else return null},getSelectedItem:function(){if(this._selectedItem)return this._selectedItem;else return null},collapseAll:function(){if(this.control)this.control.eq(0).trigger("click")},expandAll:function(){if(this.control)this.control.eq(1).trigger("click")},toggleAll:function(){if(this.control)this.control.eq(2).trigger("click")},bindData:function(t,e){if(!e){var i;if(this.fullyUpdate||!this._selectedItem){this.data=t.data;i=this.jq}else{this.data=t.data;i=this._selectedItem.find("ul")}this.createNode(i,t.data);i.treeview(this.sets);this.bindHandler(t,e);this.updateHandler(t)}else{this.data=t.data;this.createNode(this.jq,t.data);this.jq.treeview(this.sets);this.bindHandler(t,e);this.createHandler(t)}return this},createNode:function(t,i){var n=this;t.bindList({list:i,template:n.bindOptions.template,itemRender:n.bindOptions.itemRender,onBound:function(t){var i=this.find("li");for(var s=0,a=t.length;s<a;s++){var o=t[s],r=i.eq(s).data("treeItem",o);if(o.expanded){r.addClass("open")}if(o.children&&o.children.length){n.createNode(e("<ul></ul>").appendTo(r.find("span").addClass("folder").end()),o.children)}else if(o.hasChildren){r.find("span").addClass("folder").end().addClass("hasChildren").append('<ul><li><span class="placeholder">&nbsp;</span></li></ul>')}else{r.find("span").addClass("file")}}}})}};i.register("tree",s,"ListBase")})(window,jQuery,fy);(function(t){t.extend(t.fn,{swapClass:function(t,e){var i=this.filter("."+t);this.filter("."+e).removeClass(e).addClass(t);i.removeClass(t).addClass(e);return this},replaceClass:function(t,e){return this.filter("."+t).removeClass(t).addClass(e).end()},hoverClass:function(e){e=e||"hover";return this.hover(function(){t(this).addClass(e)},function(){t(this).removeClass(e)})},heightToggle:function(t,e){t?this.animate({height:"toggle"},t,e):this.each(function(){jQuery(this)[jQuery(this).is(":hidden")?"show":"hide"]();if(e)e.apply(this,arguments)})},heightHide:function(t,e){if(t){this.animate({height:"hide"},t,e)}else{this.hide();if(e)this.each(e)}},prepareBranches:function(t){if(!t.prerendered){this.filter(":last-child:not(ul)").addClass(e.last);this.filter((t.collapsed?"":"."+e.closed)+":not(."+e.open+")").find(">ul").hide()}return this.filter(":has(>ul)")},applyClasses:function(i,n){this.filter(":has(>ul):not(:has(>a))").find(">span").unbind("click.treeview").bind("click.treeview",function(e){if(this==e.target)n.apply(t(this).next())}).add(t("a",this)).hoverClass();if(!i.prerendered){this.filter(":has(>ul:hidden)").addClass(e.expandable).replaceClass(e.last,e.lastExpandable);this.not(":has(>ul:hidden)").addClass(e.collapsable).replaceClass(e.last,e.lastCollapsable);var s=this.find("div."+e.hitarea);if(!s.length)s=this.prepend('<div class="'+e.hitarea+'"/>').find("div."+e.hitarea);s.removeClass().addClass(e.hitarea).each(function(){var e="",i=t(this);t.each(i.parent().attr("class").split(" "),function(){e+=this+"-hitarea "});i.addClass(e)})}this.find("div."+e.hitarea).click(n)},treeview:function(i){i=t.extend({cookieId:"treeview"},i);if(i.toggle){var n=i.toggle;i.toggle=function(){return n.apply(t(this).parent()[0],arguments)}}function s(i,n){function s(n){return function(){a.apply(t("div."+e.hitarea,i).filter(function(){return n?t(this).parent("."+n).length:true}));return false}}t("a:eq(0)",n).click(s(e.collapsable));t("a:eq(1)",n).click(s(e.expandable));t("a:eq(2)",n).click(s())}function a(){t(this).parent().find(">.hitarea").swapClass(e.collapsableHitarea,e.expandableHitarea).swapClass(e.lastCollapsableHitarea,e.lastExpandableHitarea).end().swapClass(e.collapsable,e.expandable).swapClass(e.lastCollapsable,e.lastExpandable).find(">ul").heightToggle(i.animated,i.toggle);if(i.unique){t(this).parent().siblings().find(">.hitarea").replaceClass(e.collapsableHitarea,e.expandableHitarea).replaceClass(e.lastCollapsableHitarea,e.lastExpandableHitarea).end().replaceClass(e.collapsable,e.expandable).replaceClass(e.lastCollapsable,e.lastExpandable).find(">ul").heightHide(i.animated,i.toggle)}}this.data("toggler",a);function o(){function e(t){return t?1:0}var n=[];l.each(function(e,i){n[e]=t(i).is(":has(>ul:visible)")?1:0});t.cookie(i.cookieId,n.join(""),i.cookieOptions)}function r(){var e=t.cookie(i.cookieId);if(e){var n=e.split("");l.each(function(e,i){t(i).find(">ul")[parseInt(n[e])?"show":"hide"]()})}}this.addClass("treeview");var l=this.find("li").prepareBranches(i);switch(i.persist){case"cookie":var d=i.toggle;i.toggle=function(){o();if(d){d.apply(this,arguments)}};r();break;case"location":var h=this.find("a").filter(function(){return location.href.toLowerCase().indexOf(this.href.toLowerCase())==0});if(h.length){var c=h.addClass("selected").parents("ul, li").add(h.next()).show();if(i.prerendered){c.filter("li").swapClass(e.collapsable,e.expandable).swapClass(e.lastCollapsable,e.lastExpandable).find(">.hitarea").swapClass(e.collapsableHitarea,e.expandableHitarea).swapClass(e.lastCollapsableHitarea,e.lastExpandableHitarea)}}break}l.applyClasses(i,a);if(i.control){s(this,i.control);t(i.control).show()}return this}});t.treeview={};var e=t.treeview.classes={open:"open",closed:"closed",expandable:"expandable",expandableHitarea:"expandable-hitarea",lastExpandableHitarea:"lastExpandable-hitarea",collapsable:"collapsable",collapsableHitarea:"collapsable-hitarea",lastCollapsableHitarea:"lastCollapsable-hitarea",lastCollapsable:"lastCollapsable",lastExpandable:"lastExpandable",last:"last",hitarea:"hitarea"}})(jQuery);(function(t,e,i,n){var s=function(t,n){var a={name:n.name||i.random(),singleSelect:true,value:"id",textSrc:"text",unique:true};this.onSelect=n.onSelect;delete n.onSelect;this.onCreate=n.onCreate;delete n.onCreate;var o=e.extend(a,n),r=this;this.name=o.name;this.singleSelect=o.singleSelect;if(!this.singleSelect){this.value=[]}var l=n.renderer?":=render":"";o.template=n.template||'<li><span><label><input name="'+o.name+'" type="'+(o.singleSelect?"radio":"checkbox")+'" value="{'+o.value+'}">{'+o.textSrc+l+"}</label></span></li>";this.jq=t.prop("readonly",true).addClass("treeField-input").css("user-select","none");if(i.browser.ie){this.jq[0].onselectstart=i.PREVENT_FN}var d=e.extend({},o);d.onCreate=function(e){this.jq.delegate('input[name="'+o.name+'"]',"click",function(t){r._syncData(t)});o.target=this.jq;o.data=e.data;s.parent.call(r,t,o)};this.tree=i(e('<ul class="combo-dropDown treeField-combo" />').appendTo("body")).tree(d)};s.prototype={_syncData:function(t){if(this.singleSelect){var i=e(t.target);var n=i.val();if(this.value!=n){this.value=n;this.text=i.parent().text();this.jq.val(this.text)}}else{var s=e('[name="'+this.name+'"]:checked'),a=this,o=[];this.value.length=0;s.each(function(t,i){a.value[t]=i.value;o[t]=e(i).parent().text()});this.text=o.join("; ");this.jq.val(this.text)}this.selectHandler(t)},selectHandler:function(t){if(this.onSelect)this.onSelect(t)}};i.register("treeField",s,"ComboBase")})(window,jQuery,fy);(function(t,e,i,n){var s=function(t,i){var n={max:100,value:0,showLabel:false,labelTemplate:"{percent}%",labelPlacement:"center",width:150,height:10},a=e.extend(n,i);s.parent.call(this,t,a);this.max=a.max;this.value=a.value;this.showLabel=a.showLabel;this.labelTemplate=a.labelTemplate;this.labelPlacement=a.labelPlacement;this.onChange=a.onChange;this.onComplete=a.onComplete;this.create(a)};s.prototype={create:function(t){if(typeof this.onInit==="function")this.onInit();var i=this.jq;if(t.width&&t.height){i.css({width:t.width,height:t.height})}else if(t.width){i.css("width",t.width)}else if(t.height){i.css("height",t.height)}this.barDiv=e('<div class="progressBar-value"></div>').appendTo(i.addClass("progressBar"));if(this.showLabel){this.msgdiv=e('<div class="progressBar-text"></div>').appendTo(i);switch(this.labelPlacement){case"right":this.msgdiv.css({textAlign:"left",marginLeft:i.outerWidth(),marginTop:-(i.outerHeight()+parseInt(this.msgdiv.css("lineHeight"),10))>>1});break;case"left":this.msgdiv.css({textAlign:"right",marginLeft:-i.outerWidth(),marginTop:-(i.outerHeight()+parseInt(this.msgdiv.css("lineHeight"),10))>>1});break;case"top":this.msgdiv.css({marginTop:-(i.outerHeight()+parseInt(this.msgdiv.css("lineHeight"),10))});break;case"center":this.msgdiv.css({marginTop:-(i.outerHeight()+parseInt(this.msgdiv.css("lineHeight"),10))>>1});break;case"bottom":default:}}this.setValue(t.value);this.createHandler();return this},setValue:function(t){var i;if(typeof t==="number"){this.value=t;this.percent=Math.round(t*100/this.max);i={percent:this.percent,value:t}}else{this.value=t.value;this.percent=Math.round(this.value*100/this.max);i=e.extend({percent:this.percent},t)}this.barDiv.stop().animate({width:this.percent+"%"},500);if(this.showLabel)this.setLabel(i);if(typeof this.onChange==="function")this.onChange(i);if(this.value>=this.max&&typeof this.onComplete==="function")this.onComplete(i)},setLabel:function(t){var e=i.formatJSON(this.labelTemplate,t);this.msgdiv.html(e)}};i.register("progressBar",s,"DisplayObject")})(window,jQuery,fy);!function(t,e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(t.jQuery)}(this,function(t){"function"!=typeof Object.create&&(Object.create=function(t){function e(){}return e.prototype=t,new e});var e={init:function(e){return this.options=t.extend({},t.noty.defaults,e),this.options.layout=this.options.custom?t.noty.layouts.inline:t.noty.layouts[this.options.layout],t.noty.themes[this.options.theme]?this.options.theme=t.noty.themes[this.options.theme]:e.themeClassName=this.options.theme,delete e.layout,delete e.theme,this.options=t.extend({},this.options,this.options.layout.options),this.options.id="noty_"+(new Date).getTime()*Math.floor(1e6*Math.random()),this.options=t.extend({},this.options,e),this._build(),this},_build:function(){var e=t('<div class="noty_bar noty_type_'+this.options.type+'"></div>').attr("id",this.options.id);if(e.append(this.options.template).find(".noty_text").html(this.options.text),this.$bar=null!==this.options.layout.parent.object?t(this.options.layout.parent.object).css(this.options.layout.parent.css).append(e):e,this.options.themeClassName&&this.$bar.addClass(this.options.themeClassName).addClass("noty_container_type_"+this.options.type),this.options.buttons){this.options.closeWith=[],this.options.timeout=!1;var i=t("<div/>").addClass("noty_buttons");null!==this.options.layout.parent.object?this.$bar.find(".noty_bar").append(i):this.$bar.append(i);var n=this;t.each(this.options.buttons,function(e,i){var s=t("<button/>").addClass(i.addClass?i.addClass:"gray").html(i.text).attr("id",i.id?i.id:"button-"+e).appendTo(n.$bar.find(".noty_buttons")).on("click",function(e){t.isFunction(i.onClick)&&i.onClick.call(s,n,e)})})}this.$message=this.$bar.find(".noty_message"),this.$closeButton=this.$bar.find(".noty_close"),this.$buttons=this.$bar.find(".noty_buttons"),t.noty.store[this.options.id]=this},show:function(){var e=this;return e.options.custom?e.options.custom.find(e.options.layout.container.selector).append(e.$bar):t(e.options.layout.container.selector).append(e.$bar),e.options.theme&&e.options.theme.style&&e.options.theme.style.apply(e),"function"===t.type(e.options.layout.css)?this.options.layout.css.apply(e.$bar):e.$bar.css(this.options.layout.css||{}),e.$bar.addClass(e.options.layout.addClass),e.options.layout.container.style.apply(t(e.options.layout.container.selector)),e.showing=!0,e.options.theme&&e.options.theme.style&&e.options.theme.callback.onShow.apply(this),t.inArray("click",e.options.closeWith)>-1&&e.$bar.css("cursor","pointer").one("click",function(t){e.stopPropagation(t),e.options.callback.onCloseClick&&e.options.callback.onCloseClick.apply(e),e.close()}),t.inArray("hover",e.options.closeWith)>-1&&e.$bar.one("mouseenter",function(){e.close()}),t.inArray("button",e.options.closeWith)>-1&&e.$closeButton.one("click",function(t){e.stopPropagation(t),e.close()}),-1==t.inArray("button",e.options.closeWith)&&e.$closeButton.remove(),e.options.callback.onShow&&e.options.callback.onShow.apply(e),"string"==typeof e.options.animation.open?(e.$bar.css("height",e.$bar.innerHeight()),e.$bar.show().addClass(e.options.animation.open).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){e.options.callback.afterShow&&e.options.callback.afterShow.apply(e),e.showing=!1,e.shown=!0})):e.$bar.animate(e.options.animation.open,e.options.animation.speed,e.options.animation.easing,function(){e.options.callback.afterShow&&e.options.callback.afterShow.apply(e),e.showing=!1,e.shown=!0}),e.options.timeout&&e.$bar.delay(e.options.timeout).promise().done(function(){e.close()}),this},close:function(){if(!(this.closed||this.$bar&&this.$bar.hasClass("i-am-closing-now"))){var e=this;if(this.showing)return void e.$bar.queue(function(){e.close.apply(e)});if(!this.shown&&!this.showing){var i=[];return t.each(t.noty.queue,function(t,n){n.options.id!=e.options.id&&i.push(n)}),void(t.noty.queue=i)}e.$bar.addClass("i-am-closing-now"),e.options.callback.onClose&&e.options.callback.onClose.apply(e),"string"==typeof e.options.animation.close?e.$bar.addClass(e.options.animation.close).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){e.options.callback.afterClose&&e.options.callback.afterClose.apply(e),e.closeCleanUp()}):e.$bar.clearQueue().stop().animate(e.options.animation.close,e.options.animation.speed,e.options.animation.easing,function(){e.options.callback.afterClose&&e.options.callback.afterClose.apply(e)}).promise().done(function(){e.closeCleanUp()})}},closeCleanUp:function(){var e=this;e.options.modal&&(t.notyRenderer.setModalCount(-1),0==t.notyRenderer.getModalCount()&&t(".noty_modal").fadeOut("fast",function(){t(this).remove()})),t.notyRenderer.setLayoutCountFor(e,-1),0==t.notyRenderer.getLayoutCountFor(e)&&t(e.options.layout.container.selector).remove(),"undefined"!=typeof e.$bar&&null!==e.$bar&&("string"==typeof e.options.animation.close?(e.$bar.css("transition","all 100ms ease").css("border",0).css("margin",0).height(0),e.$bar.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){e.$bar.remove(),e.$bar=null,e.closed=!0,e.options.theme.callback&&e.options.theme.callback.onClose&&e.options.theme.callback.onClose.apply(e)})):(e.$bar.remove(),e.$bar=null,e.closed=!0)),delete t.noty.store[e.options.id],e.options.theme.callback&&e.options.theme.callback.onClose&&e.options.theme.callback.onClose.apply(e),e.options.dismissQueue||(t.noty.ontap=!0,t.notyRenderer.render()),e.options.maxVisible>0&&e.options.dismissQueue&&t.notyRenderer.render()},setText:function(t){return this.closed||(this.options.text=t,this.$bar.find(".noty_text").html(t)),this},setType:function(t){return this.closed||(this.options.type=t,this.options.theme.style.apply(this),this.options.theme.callback.onShow.apply(this)),this},setTimeout:function(t){if(!this.closed){var e=this;this.options.timeout=t,e.$bar.delay(e.options.timeout).promise().done(function(){e.close()})}return this},stopPropagation:function(t){t=t||window.event,"undefined"!=typeof t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},closed:!1,showing:!1,shown:!1};t.notyRenderer={},t.notyRenderer.init=function(i){var n=Object.create(e).init(i);return n.options.killer&&t.noty.closeAll(),n.options.force?t.noty.queue.unshift(n):t.noty.queue.push(n),t.notyRenderer.render(),"object"==t.noty.returns?n:n.options.id},t.notyRenderer.render=function(){var e=t.noty.queue[0];"object"===t.type(e)?e.options.dismissQueue?e.options.maxVisible>0?t(e.options.layout.container.selector+" li").length<e.options.maxVisible&&t.notyRenderer.show(t.noty.queue.shift()):t.notyRenderer.show(t.noty.queue.shift()):t.noty.ontap&&(t.notyRenderer.show(t.noty.queue.shift()),t.noty.ontap=!1):t.noty.ontap=!0},t.notyRenderer.show=function(e){e.options.modal&&(t.notyRenderer.createModalFor(e),t.notyRenderer.setModalCount(1)),e.options.custom?0==e.options.custom.find(e.options.layout.container.selector).length?e.options.custom.append(t(e.options.layout.container.object).addClass("i-am-new")):e.options.custom.find(e.options.layout.container.selector).removeClass("i-am-new"):0==t(e.options.layout.container.selector).length?t("body").append(t(e.options.layout.container.object).addClass("i-am-new")):t(e.options.layout.container.selector).removeClass("i-am-new"),t.notyRenderer.setLayoutCountFor(e,1),e.show()},t.notyRenderer.createModalFor=function(e){if(0==t(".noty_modal").length){var i=t("<div/>").addClass("noty_modal").addClass(e.options.theme).data("noty_modal_count",0);e.options.theme.modal&&e.options.theme.modal.css&&i.css(e.options.theme.modal.css),i.prependTo(t("body")).fadeIn("fast"),t.inArray("backdrop",e.options.closeWith)>-1&&i.on("click",function(e){t.noty.closeAll()})}},t.notyRenderer.getLayoutCountFor=function(e){return t(e.options.layout.container.selector).data("noty_layout_count")||0},t.notyRenderer.setLayoutCountFor=function(e,i){return t(e.options.layout.container.selector).data("noty_layout_count",t.notyRenderer.getLayoutCountFor(e)+i)},t.notyRenderer.getModalCount=function(){return t(".noty_modal").data("noty_modal_count")||0},t.notyRenderer.setModalCount=function(e){return t(".noty_modal").data("noty_modal_count",t.notyRenderer.getModalCount()+e)},t.fn.noty=function(e){return e.custom=t(this),t.notyRenderer.init(e)},t.noty={},t.noty.queue=[],t.noty.ontap=!0,t.noty.layouts={},t.noty.themes={},t.noty.returns="object",t.noty.store={},t.noty.get=function(e){return t.noty.store.hasOwnProperty(e)?t.noty.store[e]:!1},t.noty.close=function(e){return t.noty.get(e)?t.noty.get(e).close():!1},t.noty.setText=function(e,i){return t.noty.get(e)?t.noty.get(e).setText(i):!1},t.noty.setType=function(e,i){return t.noty.get(e)?t.noty.get(e).setType(i):!1},t.noty.clearQueue=function(){t.noty.queue=[]},t.noty.closeAll=function(){t.noty.clearQueue(),t.each(t.noty.store,function(t,e){e.close()})};var i=window.alert;return t.noty.consumeAlert=function(e){window.alert=function(i){e?e.text=i:e={text:i},t.notyRenderer.init(e)}},t.noty.stopConsumeAlert=function(){window.alert=i},t.noty.defaults={layout:"top",theme:"defaultTheme",type:"alert",text:"",dismissQueue:!0,template:'<div class="noty_message"><span class="noty_text"></span><div class="noty_close"></div></div>',animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:500},timeout:!1,force:!1,modal:!1,maxVisible:5,killer:!1,closeWith:["click"],callback:{onShow:function(){},afterShow:function(){},onClose:function(){},afterClose:function(){},onCloseClick:function(){}},buttons:!1},t(window).on("resize",function(){t.each(t.noty.layouts,function(e,i){i.container.style.apply(t(i.container.selector))})}),window.noty=function(e){return t.notyRenderer.init(e)},t.noty.layouts.bottom={name:"bottom",options:{},container:{object:'<ul id="noty_bottom_layout_container" />',selector:"ul#noty_bottom_layout_container",style:function(){t(this).css({bottom:0,left:"5%",position:"fixed",width:"90%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""},t.noty.layouts.bottomCenter={name:"bottomCenter",options:{},container:{object:'<ul id="noty_bottomCenter_layout_container" />',selector:"ul#noty_bottomCenter_layout_container",style:function(){t(this).css({bottom:20,left:0,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),t(this).css({left:(t(window).width()-t(this).outerWidth(!1))/2+"px"})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},t.noty.layouts.bottomLeft={name:"bottomLeft",options:{},container:{object:'<ul id="noty_bottomLeft_layout_container" />',selector:"ul#noty_bottomLeft_layout_container",style:function(){t(this).css({bottom:20,left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&t(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},t.noty.layouts.bottomRight={name:"bottomRight",options:{},container:{object:'<ul id="noty_bottomRight_layout_container" />',selector:"ul#noty_bottomRight_layout_container",style:function(){t(this).css({bottom:20,right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&t(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},t.noty.layouts.center={name:"center",options:{},container:{object:'<ul id="noty_center_layout_container" />',selector:"ul#noty_center_layout_container",style:function(){t(this).css({position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var e=t(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");t("body").append(e),e.find(".i-am-closing-now").remove(),e.find("li").css("display","block");var i=e.height();e.remove(),t(this).hasClass("i-am-new")?t(this).css({left:(t(window).width()-t(this).outerWidth(!1))/2+"px",top:(t(window).height()-i)/2+"px"}):t(this).animate({left:(t(window).width()-t(this).outerWidth(!1))/2+"px",top:(t(window).height()-i)/2+"px"},500)}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},t.noty.layouts.centerLeft={name:"centerLeft",options:{},container:{object:'<ul id="noty_centerLeft_layout_container" />',selector:"ul#noty_centerLeft_layout_container",style:function(){t(this).css({left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var e=t(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");t("body").append(e),e.find(".i-am-closing-now").remove(),e.find("li").css("display","block");var i=e.height();e.remove(),t(this).hasClass("i-am-new")?t(this).css({top:(t(window).height()-i)/2+"px"}):t(this).animate({top:(t(window).height()-i)/2+"px"},500),window.innerWidth<600&&t(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},t.noty.layouts.centerRight={name:"centerRight",options:{},container:{object:'<ul id="noty_centerRight_layout_container" />',selector:"ul#noty_centerRight_layout_container",style:function(){t(this).css({right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var e=t(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");t("body").append(e),e.find(".i-am-closing-now").remove(),e.find("li").css("display","block");var i=e.height();e.remove(),t(this).hasClass("i-am-new")?t(this).css({top:(t(window).height()-i)/2+"px"}):t(this).animate({top:(t(window).height()-i)/2+"px"},500),window.innerWidth<600&&t(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},t.noty.layouts.inline={name:"inline",options:{},container:{object:'<ul class="noty_inline_layout_container" />',selector:"ul.noty_inline_layout_container",style:function(){t(this).css({width:"100%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""},t.noty.layouts.top={name:"top",options:{},container:{object:'<ul id="noty_top_layout_container" />',selector:"ul#noty_top_layout_container",style:function(){t(this).css({top:0,left:"5%",position:"fixed",width:"90%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""},t.noty.layouts.topCenter={name:"topCenter",options:{},container:{object:'<ul id="noty_topCenter_layout_container" />',selector:"ul#noty_topCenter_layout_container",style:function(){t(this).css({top:20,left:0,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),t(this).css({left:(t(window).width()-t(this).outerWidth(!1))/2+"px"})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},t.noty.layouts.topLeft={name:"topLeft",options:{},container:{object:'<ul id="noty_topLeft_layout_container" />',selector:"ul#noty_topLeft_layout_container",style:function(){t(this).css({top:20,left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&t(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},t.noty.layouts.topRight={name:"topRight",options:{},container:{object:'<ul id="noty_topRight_layout_container" />',selector:"ul#noty_topRight_layout_container",style:function(){t(this).css({top:20,right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&t(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},t.noty.themes.bootstrapTheme={name:"bootstrapTheme",modal:{css:{position:"fixed",width:"100%",height:"100%",backgroundColor:"#000",zIndex:1e4,opacity:.6,display:"none",left:0,top:0}},style:function(){var e=this.options.layout.container.selector;switch(t(e).addClass("list-group"),this.$closeButton.append('<span aria-hidden="true">&times;</span><span class="sr-only">Close</span>'),this.$closeButton.addClass("close"),this.$bar.addClass("list-group-item").css("padding","0px"),this.options.type){case"alert":case"notification":this.$bar.addClass("list-group-item-info");break;case"warning":this.$bar.addClass("list-group-item-warning");break;case"error":this.$bar.addClass("list-group-item-danger");break;case"information":this.$bar.addClass("list-group-item-info");break;case"success":this.$bar.addClass("list-group-item-success")}this.$message.css({fontSize:"13px",lineHeight:"16px",textAlign:"center",padding:"8px 10px 9px",width:"auto",position:"relative"})},callback:{onShow:function(){},onClose:function(){}}},t.noty.themes.defaultTheme={name:"defaultTheme",helpers:{borderFix:function(){if(this.options.dismissQueue){var e=this.options.layout.container.selector+" "+this.options.layout.parent.selector;switch(this.options.layout.name){case"top":t(e).css({borderRadius:"0px 0px 0px 0px"}),t(e).last().css({borderRadius:"0px 0px 5px 5px"});break;case"topCenter":case"topLeft":case"topRight":case"bottomCenter":case"bottomLeft":case"bottomRight":case"center":case"centerLeft":case"centerRight":case"inline":t(e).css({borderRadius:"0px 0px 0px 0px"}),t(e).first().css({"border-top-left-radius":"5px","border-top-right-radius":"5px"}),t(e).last().css({"border-bottom-left-radius":"5px","border-bottom-right-radius":"5px"});break;case"bottom":t(e).css({borderRadius:"0px 0px 0px 0px"}),t(e).first().css({borderRadius:"5px 5px 0px 0px"})}}}},modal:{css:{position:"fixed",width:"100%",height:"100%",backgroundColor:"#000",zIndex:1e4,opacity:.6,display:"none",left:0,top:0}},style:function(){switch(this.$bar.css({overflow:"hidden",background:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAoCAQAAAClM0ndAAAAhklEQVR4AdXO0QrCMBBE0bttkk38/w8WRERpdyjzVOc+HxhIHqJGMQcFFkpYRQotLLSw0IJ5aBdovruMYDA/kT8plF9ZKLFQcgF18hDj1SbQOMlCA4kao0iiXmah7qBWPdxpohsgVZyj7e5I9KcID+EhiDI5gxBYKLBQYKHAQoGFAoEks/YEGHYKB7hFxf0AAAAASUVORK5CYII=') repeat-x scroll left top #fff"}),this.$message.css({fontSize:"13px",lineHeight:"16px",textAlign:"center",padding:"8px 10px 9px",width:"auto",position:"relative"}),this.$closeButton.css({position:"absolute",top:4,right:4,width:10,height:10,background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAQAAAAnOwc2AAAAxUlEQVR4AR3MPUoDURSA0e++uSkkOxC3IAOWNtaCIDaChfgXBMEZbQRByxCwk+BasgQRZLSYoLgDQbARxry8nyumPcVRKDfd0Aa8AsgDv1zp6pYd5jWOwhvebRTbzNNEw5BSsIpsj/kurQBnmk7sIFcCF5yyZPDRG6trQhujXYosaFoc+2f1MJ89uc76IND6F9BvlXUdpb6xwD2+4q3me3bysiHvtLYrUJto7PD/ve7LNHxSg/woN2kSz4txasBdhyiz3ugPGetTjm3XRokAAAAASUVORK5CYII=)",display:"none",cursor:"pointer"}),this.$buttons.css({padding:5,textAlign:"right",borderTop:"1px solid #ccc",backgroundColor:"#fff"}),this.$buttons.find("button").css({marginLeft:5}),this.$buttons.find("button:first").css({marginLeft:0}),this.$bar.on({mouseenter:function(){t(this).find(".noty_close").stop().fadeTo("normal",1)},mouseleave:function(){t(this).find(".noty_close").stop().fadeTo("normal",0)}}),this.options.layout.name){case"top":this.$bar.css({borderRadius:"0px 0px 5px 5px",borderBottom:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"});break;case"topCenter":case"center":case"bottomCenter":case"inline":this.$bar.css({borderRadius:"5px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"center"});break;case"topLeft":case"topRight":case"bottomLeft":case"bottomRight":case"centerLeft":case"centerRight":this.$bar.css({borderRadius:"5px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"left"});break;case"bottom":this.$bar.css({borderRadius:"5px 5px 0px 0px",borderTop:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 -2px 4px rgba(0, 0, 0, 0.1)"});break;default:this.$bar.css({border:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"})}switch(this.options.type){case"alert":case"notification":this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"});break;case"warning":this.$bar.css({backgroundColor:"#FFEAA8",borderColor:"#FFC237",color:"#826200"}),this.$buttons.css({borderTop:"1px solid #FFC237"});break;case"error":this.$bar.css({backgroundColor:"red",borderColor:"darkred",color:"#FFF"}),this.$message.css({fontWeight:"bold"}),this.$buttons.css({borderTop:"1px solid darkred"});break;case"information":this.$bar.css({backgroundColor:"#57B7E2",borderColor:"#0B90C4",color:"#FFF"}),this.$buttons.css({borderTop:"1px solid #0B90C4"});break;case"success":this.$bar.css({backgroundColor:"lightgreen",borderColor:"#50C24E",color:"darkgreen"}),this.$buttons.css({borderTop:"1px solid #50C24E"});break;default:this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"})}},callback:{onShow:function(){t.noty.themes.defaultTheme.helpers.borderFix.apply(this)},onClose:function(){t.noty.themes.defaultTheme.helpers.borderFix.apply(this)}}},t.noty.themes.relax={name:"relax",helpers:{},modal:{css:{position:"fixed",width:"100%",height:"100%",backgroundColor:"#000",zIndex:1e4,opacity:.6,display:"none",left:0,top:0}},style:function(){switch(this.$bar.css({overflow:"hidden",margin:"4px 0",borderRadius:"2px"}),this.$message.css({fontSize:"14px",lineHeight:"16px",textAlign:"center",padding:"10px",width:"auto",position:"relative"}),this.$closeButton.css({position:"absolute",top:4,right:4,width:10,height:10,background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAQAAAAnOwc2AAAAxUlEQVR4AR3MPUoDURSA0e++uSkkOxC3IAOWNtaCIDaChfgXBMEZbQRByxCwk+BasgQRZLSYoLgDQbARxry8nyumPcVRKDfd0Aa8AsgDv1zp6pYd5jWOwhvebRTbzNNEw5BSsIpsj/kurQBnmk7sIFcCF5yyZPDRG6trQhujXYosaFoc+2f1MJ89uc76IND6F9BvlXUdpb6xwD2+4q3me3bysiHvtLYrUJto7PD/ve7LNHxSg/woN2kSz4txasBdhyiz3ugPGetTjm3XRokAAAAASUVORK5CYII=)",display:"none",cursor:"pointer"}),this.$buttons.css({padding:5,textAlign:"right",borderTop:"1px solid #ccc",backgroundColor:"#fff"}),this.$buttons.find("button").css({marginLeft:5}),this.$buttons.find("button:first").css({marginLeft:0}),this.$bar.on({mouseenter:function(){t(this).find(".noty_close").stop().fadeTo("normal",1)},mouseleave:function(){t(this).find(".noty_close").stop().fadeTo("normal",0)}}),this.options.layout.name){case"top":this.$bar.css({borderBottom:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",borderTop:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"});break;case"topCenter":case"center":case"bottomCenter":case"inline":this.$bar.css({border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"center"});break;case"topLeft":case"topRight":case"bottomLeft":case"bottomRight":case"centerLeft":case"centerRight":this.$bar.css({border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"left"});break;case"bottom":this.$bar.css({borderTop:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",borderBottom:"2px solid #eee",boxShadow:"0 -2px 4px rgba(0, 0, 0, 0.1)"});break;default:this.$bar.css({border:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"})}switch(this.options.type){case"alert":case"notification":this.$bar.css({backgroundColor:"#FFF",borderColor:"#dedede",color:"#444"});break;case"warning":this.$bar.css({backgroundColor:"#FFEAA8",borderColor:"#FFC237",color:"#826200"}),this.$buttons.css({borderTop:"1px solid #FFC237"});break;case"error":this.$bar.css({backgroundColor:"#FF8181",borderColor:"#e25353",color:"#FFF"}),this.$message.css({fontWeight:"bold"}),this.$buttons.css({borderTop:"1px solid darkred"});break;case"information":this.$bar.css({backgroundColor:"#78C5E7",borderColor:"#3badd6",color:"#FFF"}),this.$buttons.css({borderTop:"1px solid #0B90C4"});break;case"success":this.$bar.css({backgroundColor:"#BCF5BC",borderColor:"#7cdd77",color:"darkgreen"}),this.$buttons.css({borderTop:"1px solid #50C24E"});break;default:this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"})}},callback:{onShow:function(){},onClose:function(){}}},window.noty});(function(t,e,i,n){var s={1:"当年",2:"当季",3:"当月",4:"当周",5:"当天"},a={1:"url(../../img/icon/btn_year.png)",2:"url(../../img/icon/btn_season.png)",3:"url(../../img/icon/btn_month.png)",4:"url(../../img/icon/btn_week.png)",5:"url(../../img/icon/btn_day.png)"};var o=function(t,n){var r=e.extend({dateRangeType:1,currentDate:null},n),l=this;o.parent.call(this,t,n);this.dateRangeType=r.dateRangeType;if(typeof r.currentDate=="undefined"||!r.currentDate)this.currentDate=new Date;else if(typeof r.currentDate==="string")this.currentDate=i.parseDate(r.currentDate);this.buttonTitle=s[r.dateRangeType]||"";this.buttonImage=a[r.dateRangeType]||"";this.onClick=r.onClick;this.create(r)};o.prototype={create:function(t){var n=this;if(typeof this.onInit==="function")this.onInit();this.instanceId=i.uuid();if(this.jq[0].tagName.toLowerCase()==="button")this.jq.addClass("fyToolBar_Button").css("background-image",this.buttonImage).html(this.buttonTitle);else{this.jq=e('<a id="'+this.instanceId+'"></a>').addClass("fyToolBar_Button").css("background-image",this.buttonImage).html(this.buttonTitle).appendTo(this.jq)}this.jq.off("click").on("click",function(t){n.clickHandler()});this.createHandler();return this},createHandler:function(){if(typeof this.onCreate==="function")this.onCreate();return this},GetDateRange:function(){var t;switch(this.dateRangeType){case 1:t=i.GetCurrentYearRange(this.currentDate);break;case 2:t=i.GetCurrentSeasonRange(this.currentDate);break;case 3:t=i.GetCurrentMonthRange(this.currentDate);break;case 4:t=i.GetCurrentWeekRange(this.currentDate);break;case 5:t={startDate:i.formatDate(this.currentDate),endDate:i.formatDate(this.currentDate)};break;default:t={startDate:"",endDate:""}}return t},clickHandler:function(){var t=this.GetDateRange();if(typeof this.onClick==="function")this.onClick(t)}};i.register("dateRange",o,"DisplayObject")})(window,jQuery,fy);